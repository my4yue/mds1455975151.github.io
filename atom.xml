<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>DongSheng&#39;s Blog</title>
  <icon>https://www.gravatar.com/avatar/2e394ffb56f8f004acd7419b61a7c933</icon>
  <subtitle>记录点滴，不断突破</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://mds1455975151.github.io/"/>
  <updated>2019-02-16T05:08:15.679Z</updated>
  <id>https://mds1455975151.github.io/</id>
  
  <author>
    <name>DongSheng</name>
    <email>madscdpc@gmail.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>电影2019</title>
    <link href="https://mds1455975151.github.io/archives/2a14730.html"/>
    <id>https://mds1455975151.github.io/archives/2a14730.html</id>
    <published>2019-02-16T04:57:29.000Z</published>
    <updated>2019-02-16T05:08:15.679Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><p>&gt;</p><a id="more"></a><h1 id="电影"><a href="#电影" class="headerlink" title="电影"></a>电影</h1><h2 id="无双"><a href="#无双" class="headerlink" title="无双"></a><strong>无双</strong></h2><h2 id="天劫逃生"><a href="#天劫逃生" class="headerlink" title="天劫逃生"></a><strong>天劫逃生</strong></h2><h2 id="星际穿越"><a href="#星际穿越" class="headerlink" title="星际穿越"></a><strong>星际穿越</strong></h2><h2 id="燃点-期待"><a href="#燃点-期待" class="headerlink" title="燃点(期待)"></a><strong>燃点</strong>(期待)</h2><h2 id="丑闻韩国"><a href="#丑闻韩国" class="headerlink" title="丑闻韩国"></a><strong>丑闻</strong>韩国</h2><h1 id="动漫"><a href="#动漫" class="headerlink" title="动漫"></a>动漫</h1><h2 id="风语咒"><a href="#风语咒" class="headerlink" title="风语咒"></a><strong>风语咒</strong></h2><h2 id="精灵旅社3：疯狂假期"><a href="#精灵旅社3：疯狂假期" class="headerlink" title="精灵旅社3：疯狂假期"></a><strong>精灵旅社3：疯狂假期</strong></h2><h1 id="电视剧"><a href="#电视剧" class="headerlink" title="电视剧"></a>电视剧</h1><p><strong>怒晴湘西</strong></p><h1 id="美剧"><a href="#美剧" class="headerlink" title="美剧"></a>美剧</h1><p><strong>盲点</strong><br><strong>黑洞频率</strong></p><h1 id="综艺节目"><a href="#综艺节目" class="headerlink" title="综艺节目"></a>综艺节目</h1><p><strong>风味人间</strong><br><strong>风味原产地：潮汕</strong></p><h1 id="动漫-1"><a href="#动漫-1" class="headerlink" title="动漫"></a>动漫</h1><p><strong>斗罗大陆</strong><br><strong>不良人3</strong></p><h1 id="小说"><a href="#小说" class="headerlink" title="小说"></a>小说</h1><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>广告位招商QQ:1455975151</li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li><a href="http://5dwz.cn/pIRcUJ" target="_blank" rel="noopener">微鲤看看</a>,邀请码 20096825</li><li><a href="http://lc.51bko.com/238839.html?router=20&amp;source=20&amp;id=A213440368" target="_blank" rel="noopener">趣头条</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li>【快来和我一起赚零花钱】 成为我的好友，入群就能每天抢红包!长按复制这条消息￥20096825￥后打开微鲤看看自动绑定，或直接输入我的邀请码 20096825 下载地址 地址 <a href="http://5dwz.cn/pIRcUJ" target="_blank" rel="noopener">http://5dwz.cn/pIRcUJ</a></li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/2a14730.html">https://mds1455975151.github.io/archives/2a14730.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      电影
    
    </summary>
    
      <category term="生活记录" scheme="https://mds1455975151.github.io/categories/%E7%94%9F%E6%B4%BB%E8%AE%B0%E5%BD%95/"/>
    
    
      <category term="电影" scheme="https://mds1455975151.github.io/tags/%E7%94%B5%E5%BD%B1/"/>
    
  </entry>
  
  <entry>
    <title>游戏界名称解释(转)</title>
    <link href="https://mds1455975151.github.io/archives/78b6d9db.html"/>
    <id>https://mds1455975151.github.io/archives/78b6d9db.html</id>
    <published>2018-11-21T03:05:45.000Z</published>
    <updated>2018-11-21T03:12:22.132Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>游戏界名称解释</p></blockquote><a id="more"></a><p><img src="/archives/78b6d9db/01.jpg" alt=""></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>广告位招商QQ:1455975151</li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li><a href="http://5dwz.cn/pIRcUJ" target="_blank" rel="noopener">微鲤看看</a>,邀请码 20096825</li><li><a href="http://lc.51bko.com/238839.html?router=20&amp;source=20&amp;id=A213440368" target="_blank" rel="noopener">趣头条</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li>【快来和我一起赚零花钱】 成为我的好友，入群就能每天抢红包!长按复制这条消息￥20096825￥后打开微鲤看看自动绑定，或直接输入我的邀请码 20096825 下载地址 地址 <a href="http://5dwz.cn/pIRcUJ" target="_blank" rel="noopener">http://5dwz.cn/pIRcUJ</a></li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/78b6d9db.html">https://mds1455975151.github.io/archives/78b6d9db.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      游戏界名称解释
    
    </summary>
    
      <category term="游戏" scheme="https://mds1455975151.github.io/categories/%E6%B8%B8%E6%88%8F/"/>
    
    
      <category term="游戏" scheme="https://mds1455975151.github.io/tags/%E6%B8%B8%E6%88%8F/"/>
    
      <category term="名称解释" scheme="https://mds1455975151.github.io/tags/%E5%90%8D%E7%A7%B0%E8%A7%A3%E9%87%8A/"/>
    
      <category term="独立游戏" scheme="https://mds1455975151.github.io/tags/%E7%8B%AC%E7%AB%8B%E6%B8%B8%E6%88%8F/"/>
    
      <category term="小众游戏" scheme="https://mds1455975151.github.io/tags/%E5%B0%8F%E4%BC%97%E6%B8%B8%E6%88%8F/"/>
    
      <category term="卡牌" scheme="https://mds1455975151.github.io/tags/%E5%8D%A1%E7%89%8C/"/>
    
      <category term="激活码测试" scheme="https://mds1455975151.github.io/tags/%E6%BF%80%E6%B4%BB%E7%A0%81%E6%B5%8B%E8%AF%95/"/>
    
      <category term="自研引擎" scheme="https://mds1455975151.github.io/tags/%E8%87%AA%E7%A0%94%E5%BC%95%E6%93%8E/"/>
    
  </entry>
  
  <entry>
    <title>搬瓦工VPS</title>
    <link href="https://mds1455975151.github.io/archives/d31e7a12.html"/>
    <id>https://mds1455975151.github.io/archives/d31e7a12.html</id>
    <published>2018-11-09T01:59:03.000Z</published>
    <updated>2018-11-09T02:19:07.469Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>搬瓦工VPS</p></blockquote><a id="more"></a><h1 id="搬瓦工VPS概述"><a href="#搬瓦工VPS概述" class="headerlink" title="搬瓦工VPS概述"></a>搬瓦工VPS概述</h1><p>搬瓦工(BandwagonHost) VPS，隶属于美国知名主机提供商IT7.NET公司旗下，由于其具有超低廉的价格和超高品质的服务，一直倍受中国用户好评。搬瓦工(BandwagonHost)VPS在中国市场占有率也是遥遥领先，对新手操作也十分友好，甚至是许多国人的第一台VPS。</p><p>  2017年后，搬瓦工逐步从低端OpenVZ方案升级为了KVM方案，并针对中国用户非常关心的网络连接质量做了大量优化，先后推出 中国联通、电信直连优化方案和针对电信网络特别优化的CN2方案。中美间访问仅需 170ms。</p><blockquote><p> 搬瓦工现已推出支付宝(Alipay)付款，无需信用卡即可轻松付款。</p></blockquote><h1 id="机房选择"><a href="#机房选择" class="headerlink" title="机房选择"></a>机房选择</h1><p>搬瓦工VPS主要有洛杉矶、凤凰城、荷兰、加拿大等9个全球机房<br>美国西海岸4个[首选]：洛杉矶QNET、洛杉矶MCOM、硅谷费利蒙(Fremont)、凤凰城(Phoenix)<br>其他4处为：纽约(New York)、佛罗里达(Florida)、加拿大温哥华、荷兰阿姆斯特丹</p><h1 id="方案选择"><a href="#方案选择" class="headerlink" title="方案选择"></a>方案选择</h1><h1 id="购买教程"><a href="#购买教程" class="headerlink" title="购买教程"></a>购买教程</h1><h1 id="FQA"><a href="#FQA" class="headerlink" title="FQA"></a>FQA</h1><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>广告位招商QQ:1455975151</li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li><a href="http://5dwz.cn/pIRcUJ" target="_blank" rel="noopener">微鲤看看</a>,邀请码 20096825</li><li><a href="http://lc.51bko.com/238839.html?router=20&amp;source=20&amp;id=A213440368" target="_blank" rel="noopener">趣头条</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li>【快来和我一起赚零花钱】 成为我的好友，入群就能每天抢红包!长按复制这条消息￥20096825￥后打开微鲤看看自动绑定，或直接输入我的邀请码 20096825 下载地址 地址 <a href="http://5dwz.cn/pIRcUJ" target="_blank" rel="noopener">http://5dwz.cn/pIRcUJ</a></li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/d31e7a12.html">https://mds1455975151.github.io/archives/d31e7a12.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      搬瓦工VPS
    
    </summary>
    
      <category term="GFW" scheme="https://mds1455975151.github.io/categories/GFW/"/>
    
    
      <category term="翻墙" scheme="https://mds1455975151.github.io/tags/%E7%BF%BB%E5%A2%99/"/>
    
      <category term="搬瓦工" scheme="https://mds1455975151.github.io/tags/%E6%90%AC%E7%93%A6%E5%B7%A5/"/>
    
      <category term="VPS" scheme="https://mds1455975151.github.io/tags/VPS/"/>
    
      <category term="科学上网" scheme="https://mds1455975151.github.io/tags/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    
      <category term="KVM" scheme="https://mds1455975151.github.io/tags/KVM/"/>
    
      <category term="OpenVZ" scheme="https://mds1455975151.github.io/tags/OpenVZ/"/>
    
      <category term="BandwagonHost" scheme="https://mds1455975151.github.io/tags/BandwagonHost/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://mds1455975151.github.io/archives/4a17b156.html"/>
    <id>https://mds1455975151.github.io/archives/4a17b156.html</id>
    <published>2018-11-09T01:10:38.182Z</published>
    <updated>2018-11-09T01:10:38.184Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>广告位招商QQ:1455975151</li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li><a href="http://5dwz.cn/pIRcUJ" target="_blank" rel="noopener">微鲤看看</a>,邀请码 20096825</li><li><a href="http://lc.51bko.com/238839.html?router=20&amp;source=20&amp;id=A213440368" target="_blank" rel="noopener">趣头条</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--><img src="/archives/f7ea3e07/zhifubao.jpg" width="50%"></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/4a17b156.html">https://mds1455975151.github.io/archives/4a17b156.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script src=&quot;\assets\js\APlayer.min.js&quot;&gt; &lt;/script&gt;&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is 
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Packer之Packer应用场景及常用概念介绍</title>
    <link href="https://mds1455975151.github.io/archives/22e81506.html"/>
    <id>https://mds1455975151.github.io/archives/22e81506.html</id>
    <published>2018-11-06T04:01:37.000Z</published>
    <updated>2018-11-09T01:10:39.410Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>Packer之Packer应用场景及常用概念介绍</p></blockquote><a id="more"></a><h1 id="Packer应用场景分析"><a href="#Packer应用场景分析" class="headerlink" title="Packer应用场景分析"></a>Packer应用场景分析</h1><p><img src="/archives/22e81506/03.png" alt=""></p><h2 id="场景1：自定义镜像"><a href="#场景1：自定义镜像" class="headerlink" title="场景1：自定义镜像"></a>场景1：自定义镜像</h2><p>用户需要定制特定版本的操作系统镜像，制作过程复杂，技术要求高，而且制作周期长。而使用packer，镜像的上传变的自动化，并且提供了一些可以参考的基础模板，用户只需要修改源ISO，就可以创建出指定版本的基础镜像，大大降低了镜像制作的门槛。<br><img src="/archives/22e81506/01.png" alt=""></p><h2 id="场景2：镜像更安全，制作更效率"><a href="#场景2：镜像更安全，制作更效率" class="headerlink" title="场景2：镜像更安全，制作更效率"></a>场景2：镜像更安全，制作更效率</h2><p>镜像市场中第三方镜像包含的内容是什么，对平台和用户都是不透明的。无法清晰的看到镜像中是否有安全隐患。为了确保安全，需要进行大量的安全扫描，一方面，使用发布第三方镜像的周期更长，另一方面，通过扫描二进制文件，很难完全避免安全风险。通过packer模板文件制作的镜像，我们可以清晰的看到脚本中执行的命令，相比二进制文件，安全扫描也更容易，同时也方便做镜像的版本管理，及多平台的镜像制作，提高镜像制作效率，不需要一遍遍的手动制作。</p><h2 id="场景3：弹性伸缩场景下，镜像的制作问题"><a href="#场景3：弹性伸缩场景下，镜像的制作问题" class="headerlink" title="场景3：弹性伸缩场景下，镜像的制作问题"></a>场景3：弹性伸缩场景下，镜像的制作问题</h2><p>在弹性伸缩场景中，镜像的生成是否方便高效起着重要的作用，当检测到工作负载达到阀值的时候，需要使用镜像来生成新的实例，当弹性伸缩的应用数量达到一定规模的时候，通过手工来创建镜像是难以接受的。特别是当需要升级应用时，如果使用传统的方式，直接在运行时实例上在线升级应用，一方面，在线升级的速度较慢，而且会影响在线用户的检验，另一方面，当出现错误的时候，回滚也比较困难，很容易形成较长时间的当机，而采用Packer,结合Jenkins和Terraform等工具，能够将应用的从代码到镜像升级，产生更新后实例的过程完全自动化。当Jenkins检测到有代码提交时，可以触发Packer根据模板使用更新后代码创建新的镜像，然后Jenkins触发Terraform来创建新ECS实例，将新实例加入伸缩组，并将旧实例移出伸缩组，这样就完成了应用的更新，当检测到新代码出现问题的时候，又可以将旧实例重新加入伸缩组而移除新实例来完成回滚。<br><img src="/archives/22e81506/02.png" alt=""></p><h1 id="Packer术语"><a href="#Packer术语" class="headerlink" title="Packer术语"></a>Packer术语</h1><ul><li><p>artifacts<br>单个构建的结果，通常是一组ID或文件来表示机器images。每个构建器都会生成一个工件。例如，对于Amazon EC2构建器，工件时一组AMI ID。对于VMware构建器，工件时包含已创建虚拟机的文件目录</p></li><li><p>builds<br>是一项单一任务，最终为单个平台生成images。多个构建并行运行。句子中的用法示例：packer构建生成了一个AMI来运行我们的web应用程序。或者packer现在正在为VMware，AWS或VirtualBox运行构建。</p></li><li><p>builders<br>是Packer组件，能够为单个平台创建机器images。构建器读取一些配置并使用它来运行和生成机器images。构建器作为构建的一部分被调用，以便创建实际的结果images。示例构建器包括VMware，AWS或VirtualBox。可以以插件的形式创建构建器并将其添加到Packer。</p></li><li><p>Commands<br>是Packer执行某项工作的程序的子命令。示例命令是build，它被调用为packer build。packer附带一组开箱即用的命令，以便定义其命令行界面。</p></li><li><p>post-Processors<br>  Packer的组件，它获取构建器或其他后处理器的结果，并处理该组件以创建新工件。后处理器的示例是压缩以压缩工件，上传到上载工件等。</p></li><li><p>Provisioners<br>Packer的组件是在该机器被转换为静态映像之前在正在运行的机器中安装和配置软件的组件。他们执行使图像包含有用软件的主要工作。示例配置文件包括shell脚本，Chef，Puppet等。</p></li><li><p>Templates<br>是JSON文件，它通过配置Packer的各种组件来定义一个或多个构建。Packer能够读取模板并使用该信息并行创建多个机器映像。</p></li></ul><h1 id="模板文件案例讲解"><a href="#模板文件案例讲解" class="headerlink" title="模板文件案例讲解"></a>模板文件案例讲解</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"># cat template.json</span><br><span class="line">&#123;</span><br><span class="line"> &quot;variables&quot;: &#123;</span><br><span class="line">       &quot;access_key&quot;: &quot;&#123;&#123;env `ALICLOUD_ACCESS_KEY`&#125;&#125;&quot;,</span><br><span class="line">       &quot;secret_key&quot;: &quot;&#123;&#123;env `ALICLOUD_SECRET_KEY`&#125;&#125;&quot;</span><br><span class="line">     &#125;,</span><br><span class="line"> &quot;builders&quot;: [&#123;</span><br><span class="line">       &quot;type&quot;:&quot;alicloud-ecs&quot;,</span><br><span class="line">       &quot;access_key&quot;:&quot;&#123;&#123;user `access_key`&#125;&#125;&quot;,</span><br><span class="line">       &quot;secret_key&quot;:&quot;&#123;&#123;user `secret_key`&#125;&#125;&quot;,</span><br><span class="line">       &quot;region&quot;:&quot;cn-beijing&quot;,</span><br><span class="line">       &quot;image_name&quot;:&quot;codepipe_demo&quot;,</span><br><span class="line">       &quot;source_image&quot;:&quot;ubuntu_16_0402_64_40G_alibase_20170711.vhd&quot;,</span><br><span class="line">       &quot;ssh_username&quot;:&quot;root&quot;,</span><br><span class="line">       &quot;instance_type&quot;:&quot;ecs.n1.medium&quot;,</span><br><span class="line">       &quot;io_optimized&quot;:&quot;true&quot;,</span><br><span class="line">       &quot;image_force_delete&quot;:&quot;true&quot;,</span><br><span class="line">       &quot;ssh_password&quot;:&quot;Test12345&quot;</span><br><span class="line">     &#125;],</span><br><span class="line"> &quot;provisioners&quot;: [&#123;</span><br><span class="line">      &quot;type&quot;: &quot;shell&quot;,</span><br><span class="line">      &quot;inline&quot;: [</span><br><span class="line">             &quot;apt-get update -yy&quot;,</span><br><span class="line">             &quot;apt-get install openjdk-8-jdk tomcat8 -yy&quot;,</span><br><span class="line">             &quot;mkdir -p /var/lib/tomcat8/webapps/&quot;</span><br><span class="line">            ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">             &quot;type&quot;: &quot;file&quot;,</span><br><span class="line">             &quot;source&quot;: &quot;target/demo.war&quot;,</span><br><span class="line">             &quot;destination&quot;: &quot;/var/lib/tomcat8/webapps/&quot;</span><br><span class="line">      &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>注释：</p><ul><li>variables：部分用于定义各类变量，最常用的各个平台的API key及secret、region等等</li><li>builders:部分为单个平台images构建镜像所需的配置信息</li><li>provisioners: 机器在被转为静态镜像之前进行的自定义软件及配置操作，可以是shell脚本，或者其他配置管理工具Ansible、Chef等编排脚本。</li></ul></blockquote><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>广告位招商QQ:1455975151</li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li><a href="http://5dwz.cn/pIRcUJ" target="_blank" rel="noopener">微鲤看看</a>,邀请码 20096825</li><li><a href="http://lc.51bko.com/238839.html?router=20&amp;source=20&amp;id=A213440368" target="_blank" rel="noopener">趣头条</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/22e81506.html">https://mds1455975151.github.io/archives/22e81506.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      Packer之Packer应用场景及常用概念介绍
    
    </summary>
    
      <category term="DevOps" scheme="https://mds1455975151.github.io/categories/DevOps/"/>
    
    
      <category term="DevOps" scheme="https://mds1455975151.github.io/tags/DevOps/"/>
    
      <category term="Packer" scheme="https://mds1455975151.github.io/tags/Packer/"/>
    
      <category term="镜像制作" scheme="https://mds1455975151.github.io/tags/%E9%95%9C%E5%83%8F%E5%88%B6%E4%BD%9C/"/>
    
      <category term="Aliyun" scheme="https://mds1455975151.github.io/tags/Aliyun/"/>
    
      <category term="资源编排" scheme="https://mds1455975151.github.io/tags/%E8%B5%84%E6%BA%90%E7%BC%96%E6%8E%92/"/>
    
      <category term="google Cloud" scheme="https://mds1455975151.github.io/tags/google-Cloud/"/>
    
      <category term="googlecompute" scheme="https://mds1455975151.github.io/tags/googlecompute/"/>
    
      <category term="应用场景" scheme="https://mds1455975151.github.io/tags/%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/"/>
    
  </entry>
  
  <entry>
    <title>Packer之实战Packer创建Jenkins镜像</title>
    <link href="https://mds1455975151.github.io/archives/6a8f9b85.html"/>
    <id>https://mds1455975151.github.io/archives/6a8f9b85.html</id>
    <published>2018-11-06T04:00:28.000Z</published>
    <updated>2018-11-09T01:10:39.465Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>Packer之实战Packer创建Jenkins镜像</p></blockquote><a id="more"></a><h1 id="准备内容"><a href="#准备内容" class="headerlink" title="准备内容"></a>准备内容</h1><ul><li>google cloud账号一个</li><li>本地服务器安装Packer，请<a href="http://www.mdslq.cn/archives/bc880644.html" target="_blank" rel="noopener">安装Packer</a></li></ul><h1 id="实践操作"><a href="#实践操作" class="headerlink" title="实践操作"></a>实践操作</h1><h2 id="创建Service-Account"><a href="#创建Service-Account" class="headerlink" title="创建Service Account"></a>创建Service Account</h2><p>google云允许你创建并下载一个认证文件，我们可以使用Packer在任何地方使用googlecompute进行构建操作。根据以下步骤获取认证文件：</p><ul><li>登录<a href="https://console.developers.google.com/" target="_blank" rel="noopener">Google Developers Console</a>选择一个项目</li><li>点击IAM和管理–服务账号</li><li>点击创建服务账号，输入服务账号–&gt;给服务账号授予项目权限(可选)–&gt;给用户授予访问服务账号权限(可选)</li><li>最后选择刚创建的服务账号，点击操作部分选择创建密钥下载json或者P12格式密钥文件</li></ul><h2 id="编写模板文件"><a href="#编写模板文件" class="headerlink" title="编写模板文件"></a>编写模板文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"># cat jenkins.json</span><br><span class="line">&#123;</span><br><span class="line"> &quot;builders&quot;: [&#123;</span><br><span class="line">       &quot;type&quot;: &quot;googlecompute&quot;,</span><br><span class="line">       &quot;account_file&quot;: &quot;account.json&quot;,</span><br><span class="line">       &quot;project_id&quot;: &quot;axiomatic-port-221011&quot;,</span><br><span class="line">       &quot;source_image_family&quot;: &quot;centos-7&quot;,</span><br><span class="line">       &quot;ssh_username&quot;: &quot;packer&quot;,</span><br><span class="line">       &quot;machine_type&quot;: &quot;n1-standard-1&quot;,</span><br><span class="line">       &quot;image_name&quot;: &quot;centos-4-jenkins-&#123;&#123; timestamp &#125;&#125;&quot;,   # 自定义images名称，默认为packer-&#123;&#123; timestamp &#125;&#125;</span><br><span class="line">       &quot;zone&quot;: &quot;asia-east2-a&quot;</span><br><span class="line">     &#125;],</span><br><span class="line"> &quot;provisioners&quot;: [&#123;</span><br><span class="line">      &quot;type&quot;: &quot;shell&quot;,</span><br><span class="line">      &quot;inline&quot;: [</span><br><span class="line">             &quot;sudo yum update -y&quot;,</span><br><span class="line">             &quot;sudo yum install -y java-1.8.0-openjdk wget&quot;,</span><br><span class="line">             &quot;wget https://pkg.jenkins.io/redhat-stable/jenkins.repo&quot;,</span><br><span class="line">             &quot;sudo cp jenkins.repo /etc/yum.repos.d/jenkins.repo&quot;,</span><br><span class="line">             &quot;sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key&quot;,</span><br><span class="line">             &quot;sudo yum install -y jenkins&quot;,</span><br><span class="line">             &quot;sudo /etc/init.d/jenkins start&quot;,</span><br><span class="line">             &quot;sudo systemctl enable jenkins&quot;</span><br><span class="line">            ]</span><br><span class="line">      &#125;</span><br><span class="line">      ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="执行构建命令"><a href="#执行构建命令" class="headerlink" title="执行构建命令"></a>执行构建命令</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br></pre></td><td class="code"><pre><span class="line"># /usr/local/terraform/bin/packer validate jenkins.json   # 执行前检查下语法，避免无用功</span><br><span class="line">Template validated successfully.</span><br><span class="line"># /usr/local/terraform/bin/packer build jenkins.json</span><br><span class="line">googlecompute output will be in this color.</span><br><span class="line"></span><br><span class="line">==&gt; googlecompute: Checking image does not exist...</span><br><span class="line">==&gt; googlecompute: Creating temporary SSH key for instance...</span><br><span class="line">==&gt; googlecompute: Using image: centos-7-v20181011                      # 选择源镜像</span><br><span class="line">==&gt; googlecompute: Creating instance...</span><br><span class="line">    googlecompute: Loading zone: asia-east2-a                           # 指定的可用区</span><br><span class="line">    googlecompute: Loading machine type: n1-standard-1                  # 指定的配置型号</span><br><span class="line">    googlecompute: Requesting instance creation...                      # 开始创建实例</span><br><span class="line">    googlecompute: Waiting for creation operation to complete...</span><br><span class="line">    googlecompute: Instance has been created!</span><br><span class="line">==&gt; googlecompute: Waiting for the instance to become running...</span><br><span class="line">    googlecompute: IP: 35.241.127.139</span><br><span class="line">==&gt; googlecompute: Using ssh communicator to connect: 35.241.127.139</span><br><span class="line">==&gt; googlecompute: Waiting for SSH to become available...</span><br><span class="line">==&gt; googlecompute: Connected to SSH!</span><br><span class="line">==&gt; googlecompute: Provisioning with shell script: /tmp/packer-shell044651127   # 开始进行自定义软件安装及配置</span><br><span class="line">    googlecompute: Loaded plugins: fastestmirror</span><br><span class="line">    googlecompute: Determining fastest mirrors</span><br><span class="line">    googlecompute:  * base: mirror.fileplanet.com</span><br><span class="line">    googlecompute:  * epel: d2lzkl7pfhq30w.cloudfront.net</span><br><span class="line">    googlecompute:  * extras: mirror.fileplanet.com</span><br><span class="line">    googlecompute:  * updates: mirror.fileplanet.com</span><br><span class="line">    googlecompute: Resolving Dependencies</span><br><span class="line">    googlecompute: --&gt; Running transaction check</span><br><span class="line">    googlecompute: ---&gt; Package google-cloud-sdk.noarch 0:220.0.0-1.el7 will be updated</span><br><span class="line">    googlecompute: ---&gt; Package google-cloud-sdk.noarch 0:223.0.0-1.el7 will be an update</span><br><span class="line">    googlecompute: ---&gt; Package google-compute-engine.noarch 0:2.8.6-1.el7 will be updated</span><br><span class="line">    googlecompute: ---&gt; Package google-compute-engine.noarch 0:2.8.8-1.el7 will be an update</span><br><span class="line">    googlecompute: ---&gt; Package python-google-compute-engine.noarch 0:2.8.6-1.el7 will be updated</span><br><span class="line">    googlecompute: ---&gt; Package python-google-compute-engine.noarch 0:2.8.8-1.el7 will be an update</span><br><span class="line">    googlecompute: ---&gt; Package tzdata.noarch 0:2018e-3.el7 will be updated</span><br><span class="line">    googlecompute: ---&gt; Package tzdata.noarch 0:2018f-2.el7 will be an update</span><br><span class="line">    googlecompute: --&gt; Finished Dependency Resolution</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Dependencies Resolved</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: ================================================================================</span><br><span class="line">    googlecompute:  Package                      Arch   Version         Repository            Size</span><br><span class="line">    googlecompute: ================================================================================</span><br><span class="line">    googlecompute: Updating:</span><br><span class="line">    googlecompute:  google-cloud-sdk             noarch 223.0.0-1.el7   google-cloud-sdk      29 M</span><br><span class="line">    googlecompute:  google-compute-engine        noarch 2.8.8-1.el7     google-cloud-compute  16 k</span><br><span class="line">    googlecompute:  python-google-compute-engine noarch 2.8.8-1.el7     google-cloud-compute 100 k</span><br><span class="line">    googlecompute:  tzdata                       noarch 2018f-2.el7     updates              484 k</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Transaction Summary</span><br><span class="line">    googlecompute: ================================================================================</span><br><span class="line">    googlecompute: Upgrade  4 Packages</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Total download size: 29 M</span><br><span class="line">    googlecompute: Downloading packages:</span><br><span class="line">    googlecompute: Delta RPMs disabled because /usr/bin/applydeltarpm not installed.</span><br><span class="line">    googlecompute: --------------------------------------------------------------------------------</span><br><span class="line">    googlecompute: Total                                               21 MB/s |  29 MB  00:01</span><br><span class="line">    googlecompute: Running transaction check</span><br><span class="line">    googlecompute: Running transaction test</span><br><span class="line">    googlecompute: Transaction test succeeded</span><br><span class="line">    googlecompute: Running transaction</span><br><span class="line">    googlecompute:   Updating   : python-google-compute-engine-2.8.8-1.el7.noarch              1/8</span><br><span class="line">    googlecompute:   Updating   : google-compute-engine-2.8.8-1.el7.noarch                     2/8</span><br><span class="line">    googlecompute:   Updating   : tzdata-2018f-2.el7.noarch                                    3/8</span><br><span class="line">    googlecompute:   Updating   : google-cloud-sdk-223.0.0-1.el7.noarch                        4/8</span><br><span class="line">    googlecompute:   Cleanup    : google-compute-engine-2.8.6-1.el7.noarch                     5/8</span><br><span class="line">    googlecompute:   Cleanup    : python-google-compute-engine-2.8.6-1.el7.noarch              6/8</span><br><span class="line">    googlecompute:   Cleanup    : tzdata-2018e-3.el7.noarch                                    7/8</span><br><span class="line">    googlecompute:   Cleanup    : google-cloud-sdk-220.0.0-1.el7.noarch                        8/8</span><br><span class="line">    googlecompute:   Verifying  : google-compute-engine-2.8.8-1.el7.noarch                     1/8</span><br><span class="line">    googlecompute:   Verifying  : python-google-compute-engine-2.8.8-1.el7.noarch              2/8</span><br><span class="line">    googlecompute:   Verifying  : google-cloud-sdk-223.0.0-1.el7.noarch                        3/8</span><br><span class="line">    googlecompute:   Verifying  : tzdata-2018f-2.el7.noarch                                    4/8</span><br><span class="line">    googlecompute:   Verifying  : google-cloud-sdk-220.0.0-1.el7.noarch                        5/8</span><br><span class="line">    googlecompute:   Verifying  : python-google-compute-engine-2.8.6-1.el7.noarch              6/8</span><br><span class="line">    googlecompute:   Verifying  : tzdata-2018e-3.el7.noarch                                    7/8</span><br><span class="line">    googlecompute:   Verifying  : google-compute-engine-2.8.6-1.el7.noarch                     8/8</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Updated:</span><br><span class="line">    googlecompute:   google-cloud-sdk.noarch 0:223.0.0-1.el7</span><br><span class="line">    googlecompute:   google-compute-engine.noarch 0:2.8.8-1.el7</span><br><span class="line">    googlecompute:   python-google-compute-engine.noarch 0:2.8.8-1.el7</span><br><span class="line">    googlecompute:   tzdata.noarch 0:2018f-2.el7</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Complete!</span><br><span class="line">    googlecompute: Loaded plugins: fastestmirror</span><br><span class="line">    googlecompute: Loading mirror speeds from cached hostfile</span><br><span class="line">    googlecompute:  * base: mirror.fileplanet.com</span><br><span class="line">    googlecompute:  * epel: d2lzkl7pfhq30w.cloudfront.net</span><br><span class="line">    googlecompute:  * extras: mirror.fileplanet.com</span><br><span class="line">    googlecompute:  * updates: mirror.fileplanet.com</span><br><span class="line">    googlecompute: Resolving Dependencies</span><br><span class="line">    googlecompute: --&gt; Running transaction check</span><br><span class="line">    googlecompute: ---&gt; Package java-1.8.0-openjdk.x86_64 1:1.8.0.191.b12-0.el7_5 will be installed</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: java-1.8.0-openjdk-headless(x86-64) = 1:1.8.0.191.b12-0.el7_5 for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: xorg-x11-fonts-Type1 for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libpng15.so.15(PNG15_0)(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libjvm.so(SUNWprivate_1.1)(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libjpeg.so.62(LIBJPEG_6.2)(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libjava.so(SUNWprivate_1.1)(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: fontconfig(x86-64) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libpng15.so.15()(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libjvm.so()(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libjpeg.so.62()(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libjava.so()(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libgif.so.4()(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libXtst.so.6()(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libXrender.so.1()(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libXi.so.6()(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libXext.so.6()(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libXcomposite.so.1()(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libX11.so.6()(64bit) for package: 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: ---&gt; Package wget.x86_64 0:1.14-15.el7_4.1 will be installed</span><br><span class="line">    googlecompute: --&gt; Running transaction check</span><br><span class="line">    googlecompute: ---&gt; Package fontconfig.x86_64 0:2.10.95-11.el7 will be installed</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: fontpackages-filesystem for package: fontconfig-2.10.95-11.el7.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: font(:lang=en) for package: fontconfig-2.10.95-11.el7.x86_64</span><br><span class="line">    googlecompute: ---&gt; Package giflib.x86_64 0:4.1.6-9.el7 will be installed</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libSM.so.6()(64bit) for package: giflib-4.1.6-9.el7.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libICE.so.6()(64bit) for package: giflib-4.1.6-9.el7.x86_64</span><br><span class="line">    googlecompute: ---&gt; Package java-1.8.0-openjdk-headless.x86_64 1:1.8.0.191.b12-0.el7_5 will be installed</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: tzdata-java &gt;= 2015d for package: 1:java-1.8.0-openjdk-headless-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: copy-jdk-configs &gt;= 2.2 for package: 1:java-1.8.0-openjdk-headless-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: lksctp-tools(x86-64) for package: 1:java-1.8.0-openjdk-headless-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: jpackage-utils for package: 1:java-1.8.0-openjdk-headless-1.8.0.191.b12-0.el7_5.x86_64</span><br><span class="line">    googlecompute: ---&gt; Package libX11.x86_64 0:1.6.5-1.el7 will be installed</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libX11-common &gt;= 1.6.5-1.el7 for package: libX11-1.6.5-1.el7.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libxcb.so.1()(64bit) for package: libX11-1.6.5-1.el7.x86_64</span><br><span class="line">    googlecompute: ---&gt; Package libXcomposite.x86_64 0:0.4.4-4.1.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package libXext.x86_64 0:1.3.3-3.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package libXi.x86_64 0:1.7.9-1.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package libXrender.x86_64 0:0.9.10-1.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package libXtst.x86_64 0:1.2.3-1.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package libjpeg-turbo.x86_64 0:1.2.90-5.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package libpng.x86_64 2:1.5.13-7.el7_2 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package xorg-x11-fonts-Type1.noarch 0:7.5-9.el7 will be installed</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: ttmkfdir for package: xorg-x11-fonts-Type1-7.5-9.el7.noarch</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: ttmkfdir for package: xorg-x11-fonts-Type1-7.5-9.el7.noarch</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: mkfontdir for package: xorg-x11-fonts-Type1-7.5-9.el7.noarch</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: mkfontdir for package: xorg-x11-fonts-Type1-7.5-9.el7.noarch</span><br><span class="line">    googlecompute: --&gt; Running transaction check</span><br><span class="line">    googlecompute: ---&gt; Package copy-jdk-configs.noarch 0:3.3-10.el7_5 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package fontpackages-filesystem.noarch 0:1.44-8.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package javapackages-tools.noarch 0:3.4.1-11.el7 will be installed</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: python-javapackages = 3.4.1-11.el7 for package: javapackages-tools-3.4.1-11.el7.noarch</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libxslt for package: javapackages-tools-3.4.1-11.el7.noarch</span><br><span class="line">    googlecompute: ---&gt; Package libICE.x86_64 0:1.0.9-9.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package libSM.x86_64 0:1.2.2-2.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package libX11-common.noarch 0:1.6.5-1.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package libxcb.x86_64 0:1.12-1.el7 will be installed</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libXau.so.6()(64bit) for package: libxcb-1.12-1.el7.x86_64</span><br><span class="line">    googlecompute: ---&gt; Package lksctp-tools.x86_64 0:1.0.17-2.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package lyx-fonts.noarch 0:2.2.3-1.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package ttmkfdir.x86_64 0:3.0.9-42.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package tzdata-java.noarch 0:2018f-2.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package xorg-x11-font-utils.x86_64 1:7.5-20.el7 will be installed</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libfontenc.so.1()(64bit) for package: 1:xorg-x11-font-utils-7.5-20.el7.x86_64</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: libXfont.so.1()(64bit) for package: 1:xorg-x11-font-utils-7.5-20.el7.x86_64</span><br><span class="line">    googlecompute: --&gt; Running transaction check</span><br><span class="line">    googlecompute: ---&gt; Package libXau.x86_64 0:1.0.8-2.1.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package libXfont.x86_64 0:1.5.2-1.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package libfontenc.x86_64 0:1.1.3-3.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package libxslt.x86_64 0:1.1.28-5.el7 will be installed</span><br><span class="line">    googlecompute: ---&gt; Package python-javapackages.noarch 0:3.4.1-11.el7 will be installed</span><br><span class="line">    googlecompute: --&gt; Processing Dependency: python-lxml for package: python-javapackages-3.4.1-11.el7.noarch</span><br><span class="line">    googlecompute: --&gt; Running transaction check</span><br><span class="line">    googlecompute: ---&gt; Package python-lxml.x86_64 0:3.2.1-4.el7 will be installed</span><br><span class="line">    googlecompute: --&gt; Finished Dependency Resolution</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Dependencies Resolved</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: ================================================================================</span><br><span class="line">    googlecompute:  Package                      Arch    Version                    Repository</span><br><span class="line">    googlecompute:                                                                            Size</span><br><span class="line">    googlecompute: ================================================================================</span><br><span class="line">    googlecompute: Installing:</span><br><span class="line">    googlecompute:  java-1.8.0-openjdk           x86_64  1:1.8.0.191.b12-0.el7_5    updates  252 k</span><br><span class="line">    googlecompute:  wget                         x86_64  1.14-15.el7_4.1            base     547 k</span><br><span class="line">    googlecompute: Installing for dependencies:</span><br><span class="line">    googlecompute:  copy-jdk-configs             noarch  3.3-10.el7_5               updates   21 k</span><br><span class="line">    googlecompute:  fontconfig                   x86_64  2.10.95-11.el7             base     229 k</span><br><span class="line">    googlecompute:  fontpackages-filesystem      noarch  1.44-8.el7                 base     9.9 k</span><br><span class="line">    googlecompute:  giflib                       x86_64  4.1.6-9.el7                base      40 k</span><br><span class="line">    googlecompute:  java-1.8.0-openjdk-headless  x86_64  1:1.8.0.191.b12-0.el7_5    updates   32 M</span><br><span class="line">    googlecompute:  javapackages-tools           noarch  3.4.1-11.el7               base      73 k</span><br><span class="line">    googlecompute:  libICE                       x86_64  1.0.9-9.el7                base      66 k</span><br><span class="line">    googlecompute:  libSM                        x86_64  1.2.2-2.el7                base      39 k</span><br><span class="line">    googlecompute:  libX11                       x86_64  1.6.5-1.el7                base     606 k</span><br><span class="line">    googlecompute:  libX11-common                noarch  1.6.5-1.el7                base     164 k</span><br><span class="line">    googlecompute:  libXau                       x86_64  1.0.8-2.1.el7              base      29 k</span><br><span class="line">    googlecompute:  libXcomposite                x86_64  0.4.4-4.1.el7              base      22 k</span><br><span class="line">    googlecompute:  libXext                      x86_64  1.3.3-3.el7                base      39 k</span><br><span class="line">    googlecompute:  libXfont                     x86_64  1.5.2-1.el7                base     152 k</span><br><span class="line">    googlecompute:  libXi                        x86_64  1.7.9-1.el7                base      40 k</span><br><span class="line">    googlecompute:  libXrender                   x86_64  0.9.10-1.el7               base      26 k</span><br><span class="line">    googlecompute:  libXtst                      x86_64  1.2.3-1.el7                base      20 k</span><br><span class="line">    googlecompute:  libfontenc                   x86_64  1.1.3-3.el7                base      31 k</span><br><span class="line">    googlecompute:  libjpeg-turbo                x86_64  1.2.90-5.el7               base     134 k</span><br><span class="line">    googlecompute:  libpng                       x86_64  2:1.5.13-7.el7_2           base     213 k</span><br><span class="line">    googlecompute:  libxcb                       x86_64  1.12-1.el7                 base     211 k</span><br><span class="line">    googlecompute:  libxslt                      x86_64  1.1.28-5.el7               base     242 k</span><br><span class="line">    googlecompute:  lksctp-tools                 x86_64  1.0.17-2.el7               base      88 k</span><br><span class="line">    googlecompute:  lyx-fonts                    noarch  2.2.3-1.el7                epel     159 k</span><br><span class="line">    googlecompute:  python-javapackages          noarch  3.4.1-11.el7               base      31 k</span><br><span class="line">    googlecompute:  python-lxml                  x86_64  3.2.1-4.el7                base     758 k</span><br><span class="line">    googlecompute:  ttmkfdir                     x86_64  3.0.9-42.el7               base      48 k</span><br><span class="line">    googlecompute:  tzdata-java                  noarch  2018f-2.el7                updates  186 k</span><br><span class="line">    googlecompute:  xorg-x11-font-utils          x86_64  1:7.5-20.el7               base      87 k</span><br><span class="line">    googlecompute:  xorg-x11-fonts-Type1         noarch  7.5-9.el7                  base     521 k</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Transaction Summary</span><br><span class="line">    googlecompute: ================================================================================</span><br><span class="line">    googlecompute: Install  2 Packages (+30 Dependent packages)</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Total download size: 37 M</span><br><span class="line">    googlecompute: Installed size: 117 M</span><br><span class="line">    googlecompute: Downloading packages:</span><br><span class="line">    googlecompute: --------------------------------------------------------------------------------</span><br><span class="line">    googlecompute: Total                                              7.2 MB/s |  37 MB  00:05</span><br><span class="line">    googlecompute: Running transaction check</span><br><span class="line">    googlecompute: Running transaction test</span><br><span class="line">    googlecompute: Transaction test succeeded</span><br><span class="line">    googlecompute: Running transaction</span><br><span class="line">    googlecompute:   Installing : libfontenc-1.1.3-3.el7.x86_64                               1/32</span><br><span class="line">    googlecompute:   Installing : libxslt-1.1.28-5.el7.x86_64                                 2/32</span><br><span class="line">    googlecompute:   Installing : fontpackages-filesystem-1.44-8.el7.noarch                   3/32</span><br><span class="line">    googlecompute:   Installing : libjpeg-turbo-1.2.90-5.el7.x86_64                           4/32</span><br><span class="line">    googlecompute:   Installing : libICE-1.0.9-9.el7.x86_64                                   5/32</span><br><span class="line">    googlecompute:   Installing : libSM-1.2.2-2.el7.x86_64                                    6/32</span><br><span class="line">    googlecompute:   Installing : lyx-fonts-2.2.3-1.el7.noarch                                7/32</span><br><span class="line">    googlecompute:   Installing : fontconfig-2.10.95-11.el7.x86_64                            8/32</span><br><span class="line">    googlecompute:   Installing : python-lxml-3.2.1-4.el7.x86_64                              9/32</span><br><span class="line">    googlecompute:   Installing : python-javapackages-3.4.1-11.el7.noarch                    10/32</span><br><span class="line">    googlecompute:   Installing : javapackages-tools-3.4.1-11.el7.noarch                     11/32</span><br><span class="line">    googlecompute:   Installing : libXfont-1.5.2-1.el7.x86_64                                12/32</span><br><span class="line">    googlecompute:   Installing : 1:xorg-x11-font-utils-7.5-20.el7.x86_64                    13/32</span><br><span class="line">    googlecompute:   Installing : libXau-1.0.8-2.1.el7.x86_64                                14/32</span><br><span class="line">    googlecompute:   Installing : libxcb-1.12-1.el7.x86_64                                   15/32</span><br><span class="line">    googlecompute:   Installing : libX11-common-1.6.5-1.el7.noarch                           16/32</span><br><span class="line">    googlecompute:   Installing : libX11-1.6.5-1.el7.x86_64                                  17/32</span><br><span class="line">    googlecompute:   Installing : libXext-1.3.3-3.el7.x86_64                                 18/32</span><br><span class="line">    googlecompute:   Installing : libXi-1.7.9-1.el7.x86_64                                   19/32</span><br><span class="line">    googlecompute:   Installing : libXtst-1.2.3-1.el7.x86_64                                 20/32</span><br><span class="line">    googlecompute:   Installing : giflib-4.1.6-9.el7.x86_64                                  21/32</span><br><span class="line">    googlecompute:   Installing : libXrender-0.9.10-1.el7.x86_64                             22/32</span><br><span class="line">    googlecompute:   Installing : libXcomposite-0.4.4-4.1.el7.x86_64                         23/32</span><br><span class="line">    googlecompute:   Installing : lksctp-tools-1.0.17-2.el7.x86_64                           24/32</span><br><span class="line">    googlecompute:   Installing : tzdata-java-2018f-2.el7.noarch                             25/32</span><br><span class="line">    googlecompute:   Installing : copy-jdk-configs-3.3-10.el7_5.noarch                       26/32</span><br><span class="line">    googlecompute:   Installing : 1:java-1.8.0-openjdk-headless-1.8.0.191.b12-0.el7_5.x86_   27/32</span><br><span class="line">    googlecompute:   Installing : ttmkfdir-3.0.9-42.el7.x86_64                               28/32</span><br><span class="line">    googlecompute:   Installing : xorg-x11-fonts-Type1-7.5-9.el7.noarch                      29/32</span><br><span class="line">    googlecompute:   Installing : 2:libpng-1.5.13-7.el7_2.x86_64                             30/32</span><br><span class="line">    googlecompute:   Installing : 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64          31/32</span><br><span class="line">    googlecompute:   Installing : wget-1.14-15.el7_4.1.x86_64                                32/32</span><br><span class="line">    googlecompute:   Verifying  : libXext-1.3.3-3.el7.x86_64                                  1/32</span><br><span class="line">    googlecompute:   Verifying  : libX11-1.6.5-1.el7.x86_64                                   2/32</span><br><span class="line">    googlecompute:   Verifying  : libXi-1.7.9-1.el7.x86_64                                    3/32</span><br><span class="line">    googlecompute:   Verifying  : libICE-1.0.9-9.el7.x86_64                                   4/32</span><br><span class="line">    googlecompute:   Verifying  : giflib-4.1.6-9.el7.x86_64                                   5/32</span><br><span class="line">    googlecompute:   Verifying  : libjpeg-turbo-1.2.90-5.el7.x86_64                           6/32</span><br><span class="line">    googlecompute:   Verifying  : libXrender-0.9.10-1.el7.x86_64                              7/32</span><br><span class="line">    googlecompute:   Verifying  : lyx-fonts-2.2.3-1.el7.noarch                                8/32</span><br><span class="line">    googlecompute:   Verifying  : libXfont-1.5.2-1.el7.x86_64                                 9/32</span><br><span class="line">    googlecompute:   Verifying  : python-lxml-3.2.1-4.el7.x86_64                             10/32</span><br><span class="line">    googlecompute:   Verifying  : 2:libpng-1.5.13-7.el7_2.x86_64                             11/32</span><br><span class="line">    googlecompute:   Verifying  : fontpackages-filesystem-1.44-8.el7.noarch                  12/32</span><br><span class="line">    googlecompute:   Verifying  : ttmkfdir-3.0.9-42.el7.x86_64                               13/32</span><br><span class="line">    googlecompute:   Verifying  : 1:java-1.8.0-openjdk-1.8.0.191.b12-0.el7_5.x86_64          14/32</span><br><span class="line">    googlecompute:   Verifying  : copy-jdk-configs-3.3-10.el7_5.noarch                       15/32</span><br><span class="line">    googlecompute:   Verifying  : python-javapackages-3.4.1-11.el7.noarch                    16/32</span><br><span class="line">    googlecompute:   Verifying  : 1:java-1.8.0-openjdk-headless-1.8.0.191.b12-0.el7_5.x86_   17/32</span><br><span class="line">    googlecompute:   Verifying  : libXcomposite-0.4.4-4.1.el7.x86_64                         18/32</span><br><span class="line">    googlecompute:   Verifying  : libXtst-1.2.3-1.el7.x86_64                                 19/32</span><br><span class="line">    googlecompute:   Verifying  : tzdata-java-2018f-2.el7.noarch                             20/32</span><br><span class="line">    googlecompute:   Verifying  : lksctp-tools-1.0.17-2.el7.x86_64                           21/32</span><br><span class="line">    googlecompute:   Verifying  : libxcb-1.12-1.el7.x86_64                                   22/32</span><br><span class="line">    googlecompute:   Verifying  : wget-1.14-15.el7_4.1.x86_64                                23/32</span><br><span class="line">    googlecompute:   Verifying  : libxslt-1.1.28-5.el7.x86_64                                24/32</span><br><span class="line">    googlecompute:   Verifying  : xorg-x11-fonts-Type1-7.5-9.el7.noarch                      25/32</span><br><span class="line">    googlecompute:   Verifying  : javapackages-tools-3.4.1-11.el7.noarch                     26/32</span><br><span class="line">    googlecompute:   Verifying  : libX11-common-1.6.5-1.el7.noarch                           27/32</span><br><span class="line">    googlecompute:   Verifying  : libXau-1.0.8-2.1.el7.x86_64                                28/32</span><br><span class="line">    googlecompute:   Verifying  : libSM-1.2.2-2.el7.x86_64                                   29/32</span><br><span class="line">    googlecompute:   Verifying  : fontconfig-2.10.95-11.el7.x86_64                           30/32</span><br><span class="line">    googlecompute:   Verifying  : libfontenc-1.1.3-3.el7.x86_64                              31/32</span><br><span class="line">    googlecompute:   Verifying  : 1:xorg-x11-font-utils-7.5-20.el7.x86_64                    32/32</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Installed:</span><br><span class="line">    googlecompute:   java-1.8.0-openjdk.x86_64 1:1.8.0.191.b12-0.el7_5</span><br><span class="line">    googlecompute:   wget.x86_64 0:1.14-15.el7_4.1</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Dependency Installed:</span><br><span class="line">    googlecompute:   copy-jdk-configs.noarch 0:3.3-10.el7_5</span><br><span class="line">    googlecompute:   fontconfig.x86_64 0:2.10.95-11.el7</span><br><span class="line">    googlecompute:   fontpackages-filesystem.noarch 0:1.44-8.el7</span><br><span class="line">    googlecompute:   giflib.x86_64 0:4.1.6-9.el7</span><br><span class="line">    googlecompute:   java-1.8.0-openjdk-headless.x86_64 1:1.8.0.191.b12-0.el7_5</span><br><span class="line">    googlecompute:   javapackages-tools.noarch 0:3.4.1-11.el7</span><br><span class="line">    googlecompute:   libICE.x86_64 0:1.0.9-9.el7</span><br><span class="line">    googlecompute:   libSM.x86_64 0:1.2.2-2.el7</span><br><span class="line">    googlecompute:   libX11.x86_64 0:1.6.5-1.el7</span><br><span class="line">    googlecompute:   libX11-common.noarch 0:1.6.5-1.el7</span><br><span class="line">    googlecompute:   libXau.x86_64 0:1.0.8-2.1.el7</span><br><span class="line">    googlecompute:   libXcomposite.x86_64 0:0.4.4-4.1.el7</span><br><span class="line">    googlecompute:   libXext.x86_64 0:1.3.3-3.el7</span><br><span class="line">    googlecompute:   libXfont.x86_64 0:1.5.2-1.el7</span><br><span class="line">    googlecompute:   libXi.x86_64 0:1.7.9-1.el7</span><br><span class="line">    googlecompute:   libXrender.x86_64 0:0.9.10-1.el7</span><br><span class="line">    googlecompute:   libXtst.x86_64 0:1.2.3-1.el7</span><br><span class="line">    googlecompute:   libfontenc.x86_64 0:1.1.3-3.el7</span><br><span class="line">    googlecompute:   libjpeg-turbo.x86_64 0:1.2.90-5.el7</span><br><span class="line">    googlecompute:   libpng.x86_64 2:1.5.13-7.el7_2</span><br><span class="line">    googlecompute:   libxcb.x86_64 0:1.12-1.el7</span><br><span class="line">    googlecompute:   libxslt.x86_64 0:1.1.28-5.el7</span><br><span class="line">    googlecompute:   lksctp-tools.x86_64 0:1.0.17-2.el7</span><br><span class="line">    googlecompute:   lyx-fonts.noarch 0:2.2.3-1.el7</span><br><span class="line">    googlecompute:   python-javapackages.noarch 0:3.4.1-11.el7</span><br><span class="line">    googlecompute:   python-lxml.x86_64 0:3.2.1-4.el7</span><br><span class="line">    googlecompute:   ttmkfdir.x86_64 0:3.0.9-42.el7</span><br><span class="line">    googlecompute:   tzdata-java.noarch 0:2018f-2.el7</span><br><span class="line">    googlecompute:   xorg-x11-font-utils.x86_64 1:7.5-20.el7</span><br><span class="line">    googlecompute:   xorg-x11-fonts-Type1.noarch 0:7.5-9.el7</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Complete!</span><br><span class="line">    googlecompute: --2018-11-06 07:42:41--  https://pkg.jenkins.io/redhat-stable/jenkins.repo</span><br><span class="line">    googlecompute: Resolving pkg.jenkins.io (pkg.jenkins.io)... 52.202.51.185</span><br><span class="line">    googlecompute: Connecting to pkg.jenkins.io (pkg.jenkins.io)|52.202.51.185|:443... connected.</span><br><span class="line">    googlecompute: HTTP request sent, awaiting response... 200 OK</span><br><span class="line">    googlecompute: Length: 85</span><br><span class="line">    googlecompute: Saving to: ‘jenkins.repo’</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute:      0K                                                       100% 3.16M=0s</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: 2018-11-06 07:42:42 (3.16 MB/s) - ‘jenkins.repo’ saved [85/85]</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Loaded plugins: fastestmirror</span><br><span class="line">    googlecompute: Loading mirror speeds from cached hostfile</span><br><span class="line">    googlecompute:  * base: mirror.fileplanet.com</span><br><span class="line">    googlecompute:  * epel: d2lzkl7pfhq30w.cloudfront.net</span><br><span class="line">    googlecompute:  * extras: mirror.fileplanet.com</span><br><span class="line">    googlecompute:  * updates: mirror.fileplanet.com</span><br><span class="line">    googlecompute: Resolving Dependencies</span><br><span class="line">    googlecompute: --&gt; Running transaction check</span><br><span class="line">    googlecompute: ---&gt; Package jenkins.noarch 0:2.138.2-1.1 will be installed</span><br><span class="line">    googlecompute: --&gt; Finished Dependency Resolution</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Dependencies Resolved</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: ================================================================================</span><br><span class="line">    googlecompute:  Package          Arch            Version                Repository        Size</span><br><span class="line">    googlecompute: ================================================================================</span><br><span class="line">    googlecompute: Installing:</span><br><span class="line">    googlecompute:  jenkins          noarch          2.138.2-1.1            jenkins           72 M</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Transaction Summary</span><br><span class="line">    googlecompute: ================================================================================</span><br><span class="line">    googlecompute: Install  1 Package</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Total download size: 72 M</span><br><span class="line">    googlecompute: Installed size: 72 M</span><br><span class="line">    googlecompute: Downloading packages:</span><br><span class="line">    googlecompute: Running transaction check</span><br><span class="line">    googlecompute: Running transaction test</span><br><span class="line">    googlecompute: Transaction test succeeded</span><br><span class="line">    googlecompute: Running transaction</span><br><span class="line">    googlecompute:   Installing : jenkins-2.138.2-1.1.noarch                                   1/1</span><br><span class="line">    googlecompute:   Verifying  : jenkins-2.138.2-1.1.noarch                                   1/1</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Installed:</span><br><span class="line">    googlecompute:   jenkins.noarch 0:2.138.2-1.1</span><br><span class="line">    googlecompute:</span><br><span class="line">    googlecompute: Complete!</span><br><span class="line">    googlecompute: Starting jenkins (via systemctl):  [  OK  ]</span><br><span class="line">    googlecompute: jenkins.service is not a native service, redirecting to /sbin/chkconfig.</span><br><span class="line">    googlecompute: Executing /sbin/chkconfig jenkins on</span><br><span class="line">==&gt; googlecompute: Deleting instance...</span><br><span class="line">    googlecompute: Instance has been deleted!</span><br><span class="line">==&gt; googlecompute: Creating image...</span><br><span class="line">==&gt; googlecompute: Deleting disk...</span><br><span class="line">    googlecompute: Disk has been deleted!</span><br><span class="line">Build &apos;googlecompute&apos; finished.</span><br><span class="line"></span><br><span class="line">==&gt; Builds finished. The artifacts of successful builds are:</span><br><span class="line">--&gt; googlecompute: A disk image was created: centos-4-jenkins-1541491568        # 输出镜像名称</span><br></pre></td></tr></table></figure><p><img src="/archives/6a8f9b85/01.png" alt=""></p><h2 id="验证镜像可用性"><a href="#验证镜像可用性" class="headerlink" title="验证镜像可用性"></a>验证镜像可用性</h2><p>利用terraform调用刚刚生成的镜像创建Jenkins服务<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line"># cat main.tf</span><br><span class="line">resource &quot;google_compute_instance&quot; &quot;vm_instance&quot; &#123;</span><br><span class="line">  name         = &quot;jenkins-instance&quot;</span><br><span class="line">  machine_type = &quot;$&#123;var.machine_type&#125;&quot;</span><br><span class="line">  tags         = [&quot;instance&quot;]</span><br><span class="line"></span><br><span class="line">  boot_disk &#123;</span><br><span class="line">    initialize_params &#123;</span><br><span class="line">      image = &quot;$&#123;var.image&#125;&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  network_interface &#123;</span><br><span class="line">    # A default network is created for all GCP projects</span><br><span class="line">    network = &quot;$&#123;google_compute_network.vpc_network.self_link&#125;&quot;</span><br><span class="line">    access_config = &#123;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#-----------------------------------------------------------------------</span><br><span class="line">resource &quot;google_compute_network&quot; &quot;vpc_network&quot; &#123;</span><br><span class="line">  name                    = &quot;terraform-network&quot;</span><br><span class="line">  auto_create_subnetworks = &quot;true&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#-----------------------------------------------------------------------</span><br><span class="line">resource &quot;google_compute_firewall&quot; &quot;vpc_firewall&quot; &#123;</span><br><span class="line">  name    = &quot;terraform-firewall&quot;</span><br><span class="line">  network = &quot;$&#123;google_compute_network.vpc_network.name&#125;&quot;</span><br><span class="line"></span><br><span class="line">  allow &#123;</span><br><span class="line">    protocol = &quot;icmp&quot;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  allow &#123;</span><br><span class="line">    protocol = &quot;tcp&quot;</span><br><span class="line">    ports    = [&quot;22&quot;, &quot;80&quot;, &quot;443&quot;, &quot;3389&quot;, &quot;8080&quot;]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  source_ranges = [&quot;0.0.0.0/0&quot;]</span><br><span class="line">  source_tags = [&quot;web&quot;]</span><br><span class="line">&#125;</span><br><span class="line">#-----------------------------------------------------------------------</span><br><span class="line">output &quot;lan_ip&quot; &#123;</span><br><span class="line">  value = &quot;$&#123;google_compute_instance.vm_instance.network_interface.0.address&#125;&quot;</span><br><span class="line">&#125;</span><br><span class="line">output &quot;wan_ip&quot; &#123;</span><br><span class="line">  value = &quot;$&#123;google_compute_instance.vm_instance.network_interface.0.access_config.0.nat_ip&#125;&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># terraform apply</span><br><span class="line">google_compute_network.vpc_network: Refreshing state... (ID: terraform-network)</span><br><span class="line">google_compute_firewall.vpc_firewall: Refreshing state... (ID: terraform-firewall)</span><br><span class="line"></span><br><span class="line">An execution plan has been generated and is shown below.</span><br><span class="line">Resource actions are indicated with the following symbols:</span><br><span class="line">  + create</span><br><span class="line"></span><br><span class="line">Terraform will perform the following actions:</span><br><span class="line"></span><br><span class="line">  + google_compute_instance.vm_instance</span><br><span class="line">      id:                                                  &lt;computed&gt;</span><br><span class="line">      boot_disk.#:                                         &quot;1&quot;</span><br><span class="line">      boot_disk.0.auto_delete:                             &quot;true&quot;</span><br><span class="line">      boot_disk.0.device_name:                             &lt;computed&gt;</span><br><span class="line">      boot_disk.0.disk_encryption_key_sha256:              &lt;computed&gt;</span><br><span class="line">      boot_disk.0.initialize_params.#:                     &quot;1&quot;</span><br><span class="line">      boot_disk.0.initialize_params.0.image:               &quot;centos-4-jenkins-1541491568&quot;</span><br><span class="line">      boot_disk.0.initialize_params.0.size:                &lt;computed&gt;</span><br><span class="line">      boot_disk.0.initialize_params.0.type:                &lt;computed&gt;</span><br><span class="line">      can_ip_forward:                                      &quot;false&quot;</span><br><span class="line">      cpu_platform:                                        &lt;computed&gt;</span><br><span class="line">      create_timeout:                                      &quot;4&quot;</span><br><span class="line">      deletion_protection:                                 &quot;false&quot;</span><br><span class="line">      guest_accelerator.#:                                 &lt;computed&gt;</span><br><span class="line">      instance_id:                                         &lt;computed&gt;</span><br><span class="line">      label_fingerprint:                                   &lt;computed&gt;</span><br><span class="line">      machine_type:                                        &quot;n1-standard-1&quot;</span><br><span class="line">      metadata_fingerprint:                                &lt;computed&gt;</span><br><span class="line">      name:                                                &quot;jenkins-instance&quot;</span><br><span class="line">      network_interface.#:                                 &quot;1&quot;</span><br><span class="line">      network_interface.0.access_config.#:                 &quot;1&quot;</span><br><span class="line">      network_interface.0.access_config.0.assigned_nat_ip: &lt;computed&gt;</span><br><span class="line">      network_interface.0.access_config.0.nat_ip:          &lt;computed&gt;</span><br><span class="line">      network_interface.0.access_config.0.network_tier:    &lt;computed&gt;</span><br><span class="line">      network_interface.0.address:                         &lt;computed&gt;</span><br><span class="line">      network_interface.0.name:                            &lt;computed&gt;</span><br><span class="line">      network_interface.0.network:                         &quot;https://www.googleapis.com/compute/v1/projects/axiomatic-port-221011/global/networks/terraform-network&quot;</span><br><span class="line">      network_interface.0.network_ip:                      &lt;computed&gt;</span><br><span class="line">      network_interface.0.subnetwork_project:              &lt;computed&gt;</span><br><span class="line">      project:                                             &lt;computed&gt;</span><br><span class="line">      scheduling.#:                                        &lt;computed&gt;</span><br><span class="line">      self_link:                                           &lt;computed&gt;</span><br><span class="line">      tags.#:                                              &quot;1&quot;</span><br><span class="line">      tags.1110487518:                                     &quot;instance&quot;</span><br><span class="line">      tags_fingerprint:                                    &lt;computed&gt;</span><br><span class="line">      zone:                                                &lt;computed&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Plan: 1 to add, 0 to change, 0 to destroy.</span><br><span class="line"></span><br><span class="line">Do you want to perform these actions?</span><br><span class="line">  Terraform will perform the actions described above.</span><br><span class="line">  Only &apos;yes&apos; will be accepted to approve.</span><br><span class="line"></span><br><span class="line">  Enter a value: yes</span><br><span class="line"></span><br><span class="line">google_compute_instance.vm_instance: Creating...</span><br><span class="line">  boot_disk.#:                                         &quot;&quot; =&gt; &quot;1&quot;</span><br><span class="line">  boot_disk.0.auto_delete:                             &quot;&quot; =&gt; &quot;true&quot;</span><br><span class="line">  boot_disk.0.device_name:                             &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  boot_disk.0.disk_encryption_key_sha256:              &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  boot_disk.0.initialize_params.#:                     &quot;&quot; =&gt; &quot;1&quot;</span><br><span class="line">  boot_disk.0.initialize_params.0.image:               &quot;&quot; =&gt; &quot;centos-4-jenkins-1541491568&quot;</span><br><span class="line">  boot_disk.0.initialize_params.0.size:                &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  boot_disk.0.initialize_params.0.type:                &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  can_ip_forward:                                      &quot;&quot; =&gt; &quot;false&quot;</span><br><span class="line">  cpu_platform:                                        &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  create_timeout:                                      &quot;&quot; =&gt; &quot;4&quot;</span><br><span class="line">  deletion_protection:                                 &quot;&quot; =&gt; &quot;false&quot;</span><br><span class="line">  guest_accelerator.#:                                 &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  instance_id:                                         &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  label_fingerprint:                                   &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  machine_type:                                        &quot;&quot; =&gt; &quot;n1-standard-1&quot;</span><br><span class="line">  metadata_fingerprint:                                &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  name:                                                &quot;&quot; =&gt; &quot;jenkins-instance&quot;</span><br><span class="line">  network_interface.#:                                 &quot;&quot; =&gt; &quot;1&quot;</span><br><span class="line">  network_interface.0.access_config.#:                 &quot;&quot; =&gt; &quot;1&quot;</span><br><span class="line">  network_interface.0.access_config.0.assigned_nat_ip: &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  network_interface.0.access_config.0.nat_ip:          &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  network_interface.0.access_config.0.network_tier:    &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  network_interface.0.address:                         &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  network_interface.0.name:                            &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  network_interface.0.network:                         &quot;&quot; =&gt; &quot;https://www.googleapis.com/compute/v1/projects/axiomatic-port-221011/global/networks/terraform-network&quot;</span><br><span class="line">  network_interface.0.network_ip:                      &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  network_interface.0.subnetwork_project:              &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  project:                                             &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  scheduling.#:                                        &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  self_link:                                           &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  tags.#:                                              &quot;&quot; =&gt; &quot;1&quot;</span><br><span class="line">  tags.1110487518:                                     &quot;&quot; =&gt; &quot;instance&quot;</span><br><span class="line">  tags_fingerprint:                                    &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">  zone:                                                &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;</span><br><span class="line">google_compute_instance.vm_instance: Still creating... (10s elapsed)</span><br><span class="line">google_compute_instance.vm_instance: Still creating... (20s elapsed)</span><br><span class="line">google_compute_instance.vm_instance: Creation complete after 29s (ID: jenkins-instance)</span><br><span class="line"></span><br><span class="line">Apply complete! Resources: 1 added, 0 changed, 0 destroyed.</span><br><span class="line"></span><br><span class="line">Outputs:</span><br><span class="line"></span><br><span class="line">lan_ip = 10.170.0.2</span><br><span class="line">wan_ip = 35.241.127.139</span><br></pre></td></tr></table></figure></p><p>访问服务：<a href="http://35.241.127.139:8080/" target="_blank" rel="noopener">http://35.241.127.139:8080/</a><br>可以在镜像制作过程中直接将jenkins服务配置更完善，这边直接应用服务<br><img src="/archives/6a8f9b85/02.png" alt=""></p><h2 id="验证完毕，销毁资源"><a href="#验证完毕，销毁资源" class="headerlink" title="验证完毕，销毁资源"></a>验证完毕，销毁资源</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">terraform destroy</span><br><span class="line">google_compute_network.vpc_network: Refreshing state... (ID: terraform-network)</span><br><span class="line">google_compute_firewall.vpc_firewall: Refreshing state... (ID: terraform-firewall)</span><br><span class="line">google_compute_instance.vm_instance: Refreshing state... (ID: jenkins-instance)</span><br><span class="line"></span><br><span class="line">An execution plan has been generated and is shown below.</span><br><span class="line">Resource actions are indicated with the following symbols:</span><br><span class="line">  - destroy</span><br><span class="line"></span><br><span class="line">Terraform will perform the following actions:</span><br><span class="line"></span><br><span class="line">  - google_compute_firewall.vpc_firewall</span><br><span class="line"></span><br><span class="line">  - google_compute_instance.vm_instance</span><br><span class="line"></span><br><span class="line">  - google_compute_network.vpc_network</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Plan: 0 to add, 0 to change, 3 to destroy.</span><br><span class="line"></span><br><span class="line">Do you really want to destroy all resources?</span><br><span class="line">  Terraform will destroy all your managed infrastructure, as shown above.</span><br><span class="line">  There is no undo. Only &apos;yes&apos; will be accepted to confirm.</span><br><span class="line"></span><br><span class="line">  Enter a value: yes</span><br><span class="line"></span><br><span class="line">google_compute_firewall.vpc_firewall: Destroying... (ID: terraform-firewall)</span><br><span class="line">google_compute_instance.vm_instance: Destroying... (ID: jenkins-instance)</span><br><span class="line">google_compute_firewall.vpc_firewall: Still destroying... (ID: terraform-firewall, 10s elapsed)</span><br><span class="line">google_compute_instance.vm_instance: Still destroying... (ID: jenkins-instance, 10s elapsed)</span><br><span class="line">google_compute_firewall.vpc_firewall: Destruction complete after 11s</span><br><span class="line">google_compute_instance.vm_instance: Still destroying... (ID: jenkins-instance, 20s elapsed)</span><br><span class="line">google_compute_instance.vm_instance: Destruction complete after 26s</span><br><span class="line">google_compute_network.vpc_network: Destroying... (ID: terraform-network)</span><br><span class="line">google_compute_network.vpc_network: Still destroying... (ID: terraform-network, 10s elapsed)</span><br><span class="line">google_compute_network.vpc_network: Still destroying... (ID: terraform-network, 20s elapsed)</span><br><span class="line">google_compute_network.vpc_network: Still destroying... (ID: terraform-network, 30s elapsed)</span><br><span class="line">google_compute_network.vpc_network: Still destroying... (ID: terraform-network, 40s elapsed)</span><br><span class="line">google_compute_network.vpc_network: Still destroying... (ID: terraform-network, 50s elapsed)</span><br><span class="line">google_compute_network.vpc_network: Still destroying... (ID: terraform-network, 1m0s elapsed)</span><br><span class="line">google_compute_network.vpc_network: Destruction complete after 1m9s</span><br><span class="line"></span><br><span class="line">Destroy complete! Resources: 3 destroyed.</span><br></pre></td></tr></table></figure><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li>Packer官网：<a href="https://www.packer.io/" target="_blank" rel="noopener">https://www.packer.io/</a></li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>广告位招商QQ:1455975151</li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li><a href="http://5dwz.cn/pIRcUJ" target="_blank" rel="noopener">微鲤看看</a>,邀请码 20096825</li><li><a href="http://lc.51bko.com/238839.html?router=20&amp;source=20&amp;id=A213440368" target="_blank" rel="noopener">趣头条</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/6a8f9b85.html">https://mds1455975151.github.io/archives/6a8f9b85.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      Packer之实战Packer创建Jenkins镜像
    
    </summary>
    
      <category term="DevOps" scheme="https://mds1455975151.github.io/categories/DevOps/"/>
    
    
      <category term="DevOps" scheme="https://mds1455975151.github.io/tags/DevOps/"/>
    
      <category term="Jenkins" scheme="https://mds1455975151.github.io/tags/Jenkins/"/>
    
      <category term="Packer" scheme="https://mds1455975151.github.io/tags/Packer/"/>
    
      <category term="镜像制作" scheme="https://mds1455975151.github.io/tags/%E9%95%9C%E5%83%8F%E5%88%B6%E4%BD%9C/"/>
    
      <category term="Aliyun" scheme="https://mds1455975151.github.io/tags/Aliyun/"/>
    
      <category term="资源编排" scheme="https://mds1455975151.github.io/tags/%E8%B5%84%E6%BA%90%E7%BC%96%E6%8E%92/"/>
    
      <category term="google Cloud" scheme="https://mds1455975151.github.io/tags/google-Cloud/"/>
    
      <category term="googlecompute" scheme="https://mds1455975151.github.io/tags/googlecompute/"/>
    
      <category term="应用场景" scheme="https://mds1455975151.github.io/tags/%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/"/>
    
  </entry>
  
  <entry>
    <title>Packer之Packer介绍</title>
    <link href="https://mds1455975151.github.io/archives/bc880644.html"/>
    <id>https://mds1455975151.github.io/archives/bc880644.html</id>
    <published>2018-11-06T03:37:45.000Z</published>
    <updated>2018-11-09T01:10:39.395Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>Packer之Packer介绍</p></blockquote><a id="more"></a><h1 id="Packer介绍"><a href="#Packer介绍" class="headerlink" title="Packer介绍"></a>Packer介绍</h1><p>所谓的镜像，就是一个包含预先配置好操作系统和预装软件的静态单元，通过它可以快速的创建新的虚拟机运行实例，不同的平台支持不同的镜像格式，例如AWS的EC2支持AMIs，VMware支持VMDK/VMX,Alicloud的ECS支持RAW和VHD格式等等。各云平台都提供了大量的基础镜像供用户使用，但是随着云平台用户成熟度的增加，用户对镜像个性化的需要越来越强烈，同时出于商业的考虑，用户也希望自己的系统具有在不同云平台之间迁移的能力，当然也包含个性化的镜像迁移的能力。尽管各大云平台都提供了WEB界面工具使得用户可以手工创建自定义镜像，也开放了相应的API使得通过自动化的脚本来创建个性化的自定义镜像成为可能。但是都存在一定的局限性而难以满足用户的最终需求，Packer就在这种背景下诞生了。</p><p>Packer是一个从单一的模板文件来创建多平台一致性镜像的轻量级开源工具，它能够运行在常用的主流操作系统如Windows、Linux和Mac os上，能够高效的并行创建多平台例如AWS、Azure和Alicloud的镜像，它的目的并不是取代Puppet/Chef等配置管理工具，实际上，当制作镜像的时候，Packer可以使用Chef或者Puppet等工具来安装镜像所需要的软件。通过Packer自动化的创建各种平台的镜像是非常容易的。</p><p>优势：</p><ul><li>基础设施部署迅速</li><li>可以移植性</li><li>镜像制作自动化，提升效率，降低误操作</li><li>支持所有常见的公有云厂商</li><li>支持自定义插件(可自增强)</li><li>开源(成熟、透明)</li></ul><h1 id="工作流程"><a href="#工作流程" class="headerlink" title="工作流程"></a>工作流程</h1><p>大致流程：模板–&gt;基于公有云基础镜像–&gt;创建主机、自定义设置–&gt;创建镜像–上传镜像–&gt;删除主机–&gt;返回镜像信息</p><h1 id="Packer安装部署"><a href="#Packer安装部署" class="headerlink" title="Packer安装部署"></a>Packer安装部署</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># wget https://releases.hashicorp.com/packer/1.3.2/packer_1.3.2_linux_amd64.zip</span><br><span class="line"># unzip packer_1.3.2_linux_amd64.zip</span><br><span class="line"># packer --version</span><br><span class="line">1.3.2</span><br><span class="line"># packer -h</span><br><span class="line">Usage: packer [--version] [--help] &lt;command&gt; [&lt;args&gt;]</span><br><span class="line"></span><br><span class="line">Available commands are:</span><br><span class="line">    build       build image(s) from template</span><br><span class="line">    fix         fixes templates from old versions of packer</span><br><span class="line">    inspect     see components of a template</span><br><span class="line">    validate    check that a template is valid</span><br><span class="line">    version     Prints the Packer version</span><br></pre></td></tr></table></figure><blockquote><p><strong>注意</strong>: 下载解压后使用的时候建议使用包的绝对路径执行，因为包名和Linux下另外一个二进制包重名了，或者将packer重命名，例如：packer.io等等</p></blockquote><h1 id="基于google-Cloud案例"><a href="#基于google-Cloud案例" class="headerlink" title="基于google Cloud案例"></a>基于google Cloud案例</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"># cat google.json</span><br><span class="line">&#123;</span><br><span class="line">  &quot;builders&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;type&quot;: &quot;googlecompute&quot;,</span><br><span class="line">      &quot;account_file&quot;: &quot;account.json&quot;,</span><br><span class="line">      &quot;project_id&quot;: &quot;xxx&quot;,</span><br><span class="line">      &quot;source_image&quot;: &quot;debian-7-wheezy-v20150127&quot;,</span><br><span class="line">      &quot;ssh_username&quot;: &quot;packer&quot;,</span><br><span class="line">      &quot;zone&quot;: &quot;us-central1-a&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># ./packer build google.json</span><br><span class="line">googlecompute output will be in this color.</span><br><span class="line"></span><br><span class="line">==&gt; googlecompute: Checking image does not exist...</span><br><span class="line">==&gt; googlecompute: Creating temporary SSH key for instance...</span><br><span class="line">==&gt; googlecompute: Using image: debian-7-wheezy-v20150127</span><br><span class="line">==&gt; googlecompute: Creating instance...</span><br><span class="line">    googlecompute: Loading zone: us-central1-a</span><br><span class="line">    googlecompute: Loading machine type: n1-standard-1</span><br><span class="line">    googlecompute: Requesting instance creation...</span><br><span class="line">    googlecompute: Waiting for creation operation to complete...</span><br><span class="line">    googlecompute: Instance has been created!</span><br><span class="line">==&gt; googlecompute: Waiting for the instance to become running...</span><br><span class="line">    googlecompute: IP: 35.202.237.72</span><br><span class="line">==&gt; googlecompute: Using ssh communicator to connect: 35.202.237.72</span><br><span class="line">==&gt; googlecompute: Waiting for SSH to become available...</span><br><span class="line">==&gt; googlecompute: Connected to SSH!</span><br><span class="line">==&gt; googlecompute: Deleting instance...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    googlecompute: Instance has been deleted!</span><br><span class="line">==&gt; googlecompute: Creating image...</span><br><span class="line">==&gt; googlecompute: Deleting disk...</span><br><span class="line">    googlecompute: Disk has been deleted!</span><br><span class="line">Build &apos;googlecompute&apos; finished.</span><br><span class="line"></span><br><span class="line">==&gt; Builds finished. The artifacts of successful builds are:</span><br><span class="line">--&gt; googlecompute: A disk image was created: packer-1541417917</span><br></pre></td></tr></table></figure><p><img src="/archives/bc880644/01.png" alt=""></p><h1 id="相关资料"><a href="#相关资料" class="headerlink" title="相关资料"></a>相关资料</h1><ul><li>Packer官网：<a href="https://www.packer.io/" target="_blank" rel="noopener">https://www.packer.io/</a></li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>广告位招商QQ:1455975151</li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li><a href="http://5dwz.cn/pIRcUJ" target="_blank" rel="noopener">微鲤看看</a>,邀请码 20096825</li><li><a href="http://lc.51bko.com/238839.html?router=20&amp;source=20&amp;id=A213440368" target="_blank" rel="noopener">趣头条</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/bc880644.html">https://mds1455975151.github.io/archives/bc880644.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      Packer之Packer介绍
    
    </summary>
    
      <category term="DevOps" scheme="https://mds1455975151.github.io/categories/DevOps/"/>
    
    
      <category term="DevOps" scheme="https://mds1455975151.github.io/tags/DevOps/"/>
    
      <category term="Packer" scheme="https://mds1455975151.github.io/tags/Packer/"/>
    
      <category term="镜像制作" scheme="https://mds1455975151.github.io/tags/%E9%95%9C%E5%83%8F%E5%88%B6%E4%BD%9C/"/>
    
      <category term="Aliyun" scheme="https://mds1455975151.github.io/tags/Aliyun/"/>
    
      <category term="资源编排" scheme="https://mds1455975151.github.io/tags/%E8%B5%84%E6%BA%90%E7%BC%96%E6%8E%92/"/>
    
      <category term="google Cloud" scheme="https://mds1455975151.github.io/tags/google-Cloud/"/>
    
      <category term="googlecompute" scheme="https://mds1455975151.github.io/tags/googlecompute/"/>
    
  </entry>
  
  <entry>
    <title>Open-Falcon微信告警设置记录</title>
    <link href="https://mds1455975151.github.io/archives/d5569d0d.html"/>
    <id>https://mds1455975151.github.io/archives/d5569d0d.html</id>
    <published>2018-11-02T03:10:28.000Z</published>
    <updated>2018-11-09T01:10:39.273Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>Open-Falcon微信告警设置记录</p></blockquote><a id="more"></a><h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>为了方便查看，计划开启微信报警功能。</p><h1 id="设置实践"><a href="#设置实践" class="headerlink" title="设置实践"></a>设置实践</h1><p><a href="https://github.com/Yanjunhui/chat" target="_blank" rel="noopener">插件GitHub地址</a>写的已经很详细了，但是企业微信发展后页面位置有些变化，记录下最新版本企业微信后操作过程 截止到2018.11.02</p><h2 id="申请企业号"><a href="#申请企业号" class="headerlink" title="申请企业号"></a>申请企业号</h2><p>申请企业号, 不通过企业认证的话,有200人的限制,用于故障告警够用。</p><h2 id="获取对接权限"><a href="#获取对接权限" class="headerlink" title="获取对接权限"></a>获取对接权限</h2><ul><li>获取corpid<br>我的企业–&gt;企业信息–&gt;企业ID<br><img src="/archives/d5569d0d/01.png" alt=""></li><li>开启回调模式获取key<br>应用与小程序–&gt;自建–&gt;创建应用–&gt;获取AgentId及Secret<br><img src="/archives/d5569d0d/02.png" alt=""><br><img src="/archives/d5569d0d/03.png" alt=""></li><li>使用微信关注企业号才可以从微信收到信息，否则只能从企业微信APP中收到信息<br><img src="/archives/d5569d0d/04.png" alt=""></li></ul><h2 id="插件安装及配置"><a href="#插件安装及配置" class="headerlink" title="插件安装及配置"></a>插件安装及配置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">git clone https://www.github.com/yanjunhui/chat.git</span><br><span class="line">cd chat</span><br><span class="line"># cat config.conf</span><br><span class="line">[http]</span><br><span class="line">port = 4567</span><br><span class="line"></span><br><span class="line">[weixin]</span><br><span class="line">CorpID = xxx</span><br><span class="line">AgentId = xxx</span><br><span class="line">Secret = xxx</span><br><span class="line"># ./control.sh -h</span><br><span class="line">./control.sh start|stop|restart|status</span><br></pre></td></tr></table></figure><h2 id="Open-Falcon-alarm报警配置"><a href="#Open-Falcon-alarm报警配置" class="headerlink" title="Open-Falcon alarm报警配置"></a>Open-Falcon alarm报警配置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># vim alarm/config/cfg.json</span><br><span class="line">    &quot;api&quot;: &#123;</span><br><span class="line">        &quot;im&quot;: &quot;http://127.0.0.1:4567/send&quot;,</span><br><span class="line">        &quot;sms&quot;: &quot;http://127.0.0.1:1986/&quot;,</span><br><span class="line">        &quot;mail&quot;: &quot;http://127.0.0.1:4000/sender/mail&quot;,</span><br><span class="line">        &quot;dashboard&quot;: &quot;http://127.0.0.1:8081&quot;,</span><br><span class="line">        &quot;plus_api&quot;:&quot;http://127.0.0.1:8080&quot;,</span><br><span class="line">        &quot;plus_api_token&quot;: &quot;default-token-used-in-server-side&quot;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">修改im部分为chat服务的IP及定义的端口号，然后重启alarm服务</span><br><span class="line">./open-falcon restart alarm</span><br></pre></td></tr></table></figure><p>在dashboard的user部分完善各个用户IM信息，需要注意这块的IM账号为企业微信中的用户信息非个人微信账号。<br><img src="/archives/d5569d0d/05.png" alt=""><br><img src="/archives/d5569d0d/06.png" alt=""></p><h2 id="测试报警"><a href="#测试报警" class="headerlink" title="测试报警"></a>测试报警</h2><p>插件接收的参数为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tos     企业微信显示的用户名非微信号名称</span><br><span class="line">content 信息内容</span><br><span class="line"></span><br><span class="line">使用curl命令测试报警</span><br><span class="line">curl http://127.0.0.1:4567/send -d &quot;tos=xxx&amp;content=host is up&quot;</span><br></pre></td></tr></table></figure></p><p><img src="/archives/d5569d0d/07.png" alt=""></p><h2 id="其他问题"><a href="#其他问题" class="headerlink" title="其他问题"></a>其他问题</h2><ul><li>报警内容会被过滤，例如：报警信息中的[]等服号会被处理掉</li><li>出现问题可以查看chat和alarm日志进行排查</li></ul><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://github.com/Yanjunhui/chat" target="_blank" rel="noopener">插件地址</a></li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>广告位招商QQ:1455975151</li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li><a href="http://5dwz.cn/pIRcUJ" target="_blank" rel="noopener">微鲤看看</a>,邀请码 20096825</li><li><a href="http://lc.51bko.com/238839.html?router=20&amp;source=20&amp;id=A213440368" target="_blank" rel="noopener">趣头条</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/d5569d0d.html">https://mds1455975151.github.io/archives/d5569d0d.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      Open-Falcon微信告警设置记录
    
    </summary>
    
      <category term="Linux运维" scheme="https://mds1455975151.github.io/categories/Linux%E8%BF%90%E7%BB%B4/"/>
    
    
      <category term="Open-Falcon" scheme="https://mds1455975151.github.io/tags/Open-Falcon/"/>
    
      <category term="小米监控" scheme="https://mds1455975151.github.io/tags/%E5%B0%8F%E7%B1%B3%E7%9B%91%E6%8E%A7/"/>
    
      <category term="微信报警" scheme="https://mds1455975151.github.io/tags/%E5%BE%AE%E4%BF%A1%E6%8A%A5%E8%AD%A6/"/>
    
      <category term="报警" scheme="https://mds1455975151.github.io/tags/%E6%8A%A5%E8%AD%A6/"/>
    
      <category term="告警" scheme="https://mds1455975151.github.io/tags/%E5%91%8A%E8%AD%A6/"/>
    
      <category term="IM" scheme="https://mds1455975151.github.io/tags/IM/"/>
    
  </entry>
  
  <entry>
    <title>Hexo博客添加Google AdSense</title>
    <link href="https://mds1455975151.github.io/archives/3a06bb38.html"/>
    <id>https://mds1455975151.github.io/archives/3a06bb38.html</id>
    <published>2018-10-27T09:16:10.000Z</published>
    <updated>2018-11-09T01:10:38.370Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>Hexo博客添加Google AdSense</p></blockquote><p>部署了站点，肯定要发挥站点的作用到极致。我们如何添加Google AdSense赚取零花钱呢？<br><a id="more"></a></p><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>部署了站点，肯定要发挥站点的作用到极致。我们如何添加Google AdSense赚取零花钱呢？</p><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><h2 id="大致流程"><a href="#大致流程" class="headerlink" title="大致流程"></a>大致流程</h2><ul><li>注册<a href="https://www.google.com/adsense" target="_blank" rel="noopener">google adsense</a></li><li>获取代码</li><li>新建模板</li><li>添加到页面模板的指定位置</li><li>生成并发布站点</li><li>验证</li></ul><h2 id="分步讲解"><a href="#分步讲解" class="headerlink" title="分步讲解"></a>分步讲解</h2><p>1、注册略<br>2、代码格式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  (adsbygoogle = window.adsbygoogle || []).push(&#123;</span><br><span class="line">    google_ad_client: &quot;ca-pub-xxx&quot;,</span><br><span class="line">    enable_page_level_ads: true</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p><p>3、新建AdSense模板<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">themes/next/layout/_custom/google_adsense.ejs</span><br></pre></td></tr></table></figure></p><p>在next主题下的layout/_custom文件夹下创建一个google_adsense.ejs文件<br>然后将Google AdSense的代码复制到google_adsense.ejs</p><p>编辑 _layout.swig<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- Google AdSense start --&gt;</span><br><span class="line">&#123;% include &apos;_custom/google_adsense.ejs&apos; %&#125;</span><br><span class="line">&lt;!-- Google AdSense end --&gt;</span><br></pre></td></tr></table></figure></p><p>根据Google AdSense 的要求将代码放置在 <head> 和 </head> 标记之间</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://darrenliuwei.com/hexo-next-blog.html" target="_blank" rel="noopener">搭建hexo next主题的博客教程</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>广告位招商QQ:1455975151</li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li><a href="http://5dwz.cn/pIRcUJ" target="_blank" rel="noopener">微鲤看看</a>,邀请码 20096825</li><li><a href="http://lc.51bko.com/238839.html?router=20&amp;source=20&amp;id=A213440368" target="_blank" rel="noopener">趣头条</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/3a06bb38.html">https://mds1455975151.github.io/archives/3a06bb38.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      Hexo博客添加Google AdSense
    
    </summary>
    
      <category term="Hexo" scheme="https://mds1455975151.github.io/categories/Hexo/"/>
    
    
      <category term="Hexo" scheme="https://mds1455975151.github.io/tags/Hexo/"/>
    
      <category term="AdSense" scheme="https://mds1455975151.github.io/tags/AdSense/"/>
    
      <category term="next" scheme="https://mds1455975151.github.io/tags/next/"/>
    
  </entry>
  
  <entry>
    <title>为何翻墙</title>
    <link href="https://mds1455975151.github.io/archives/326daa60.html"/>
    <id>https://mds1455975151.github.io/archives/326daa60.html</id>
    <published>2018-10-27T09:04:28.000Z</published>
    <updated>2018-11-09T01:10:40.178Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>为何翻墙</p></blockquote><a id="more"></a><p>存在即有其合理性？</p><h1 id="翻墙优劣"><a href="#翻墙优劣" class="headerlink" title="翻墙优劣"></a>翻墙优劣</h1><h2 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h2><ul><li>优质的科研文章、学习资料</li><li>不同文化信仰</li><li>IT互联网交流<br>…..</li></ul><h2 id="劣势"><a href="#劣势" class="headerlink" title="劣势"></a>劣势</h2><ul><li>成人视频网站及色情论坛污染</li><li>狂人的宗教信仰网站</li><li>各类博彩网站<br>….</li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>广告位招商QQ:1455975151</li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li><a href="http://5dwz.cn/pIRcUJ" target="_blank" rel="noopener">微鲤看看</a>,邀请码 20096825</li><li><a href="http://lc.51bko.com/238839.html?router=20&amp;source=20&amp;id=A213440368" target="_blank" rel="noopener">趣头条</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/326daa60.html">https://mds1455975151.github.io/archives/326daa60.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      为何翻墙
    
    </summary>
    
      <category term="GFW" scheme="https://mds1455975151.github.io/categories/GFW/"/>
    
    
      <category term="翻墙" scheme="https://mds1455975151.github.io/tags/%E7%BF%BB%E5%A2%99/"/>
    
      <category term="GFW" scheme="https://mds1455975151.github.io/tags/GFW/"/>
    
  </entry>
  
  <entry>
    <title>什么是GFW</title>
    <link href="https://mds1455975151.github.io/archives/ade99d4c.html"/>
    <id>https://mds1455975151.github.io/archives/ade99d4c.html</id>
    <published>2018-10-27T08:48:24.000Z</published>
    <updated>2018-11-09T01:10:40.326Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>什么是GFW</p></blockquote><a id="more"></a><p>GFW即中国国家防火墙，也俗称墙、防火墙等，是我国在互联网编辑审查系统的统称。此系统起步于998年。网友所说的”被墙”即指网站内容被防火长城所屏蔽或者服务器的通信被封阻。</p><p>防火长城的主要设计者方滨兴。</p><p>涉及主要技术：</p><ul><li>域名解析服务缓存污染</li><li>针对境外的IP地址封锁</li><li>IP地址特定端口封锁</li><li>无状态TCP连接重置</li><li>对加密连接的干扰</li><li>TCP关键字阻断</li><li>CA证书检测</li><li>对破网软件的反制</li><li>间歇性完全封锁</li><li>深度包检测</li><li>针对IPv6协议的审查</li><li>对电子邮件通讯的拦截</li><li>网上攻击</li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>广告位招商QQ:1455975151</li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li><a href="http://5dwz.cn/pIRcUJ" target="_blank" rel="noopener">微鲤看看</a>,邀请码 20096825</li><li><a href="http://lc.51bko.com/238839.html?router=20&amp;source=20&amp;id=A213440368" target="_blank" rel="noopener">趣头条</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/ade99d4c.html">https://mds1455975151.github.io/archives/ade99d4c.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      什么是GFW
    
    </summary>
    
      <category term="GFW" scheme="https://mds1455975151.github.io/categories/GFW/"/>
    
    
      <category term="翻墙" scheme="https://mds1455975151.github.io/tags/%E7%BF%BB%E5%A2%99/"/>
    
      <category term="GFW" scheme="https://mds1455975151.github.io/tags/GFW/"/>
    
      <category term="墙" scheme="https://mds1455975151.github.io/tags/%E5%A2%99/"/>
    
      <category term="梯子" scheme="https://mds1455975151.github.io/tags/%E6%A2%AF%E5%AD%90/"/>
    
  </entry>
  
  <entry>
    <title>群晖系列之源码管理</title>
    <link href="https://mds1455975151.github.io/archives/883339a4.html"/>
    <id>https://mds1455975151.github.io/archives/883339a4.html</id>
    <published>2018-10-27T06:44:43.000Z</published>
    <updated>2018-11-09T01:10:41.356Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p> 群晖系列之源码管理</p></blockquote><a id="more"></a><p>没入手群晖之前自己的代码管理都是使用VMware虚拟机自己部署的SVN服务器，有了群晖以后可以使用群晖套件。电脑也不用24小时开机了，而且使用群晖数据的安全性也大大提高，整合了资源，专业的设备做专业的事。</p><p>套件支持SVN和Git，我选择使用SVN，SVN安装上手都比较简单，给大家简单介绍下。</p><h1 id="群晖部署SVN服务"><a href="#群晖部署SVN服务" class="headerlink" title="群晖部署SVN服务"></a>群晖部署SVN服务</h1><p>1、安装SVN套件<br><img src="/archives/883339a4/01.png" alt=""><br>2、点击新增、键入存储库名称，会自动生成访问地址，需要记录下<br><img src="/archives/883339a4/02.png" alt=""><br>3、添加用户及设置权限<br><img src="/archives/883339a4/03.png" alt=""><br>4、本地检索存储库并上传文件<br>略</p><h1 id="群晖部署Git服务"><a href="#群晖部署Git服务" class="headerlink" title="群晖部署Git服务"></a>群晖部署Git服务</h1><p>Git相对SVN就要复杂一些，接着我们讲解下Git服务的部署及使用<br>1、安装Git套件<br>2、创建Git仓库共享目录<br>3、登录服务器创建仓库<br>4、window主机clone测试</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>广告位招商QQ:1455975151</li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li><a href="http://5dwz.cn/pIRcUJ" target="_blank" rel="noopener">微鲤看看</a>,邀请码 20096825</li><li><a href="http://lc.51bko.com/238839.html?router=20&amp;source=20&amp;id=A213440368" target="_blank" rel="noopener">趣头条</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/883339a4.html">https://mds1455975151.github.io/archives/883339a4.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      群晖系列之源码管理
    
    </summary>
    
      <category term="群晖" scheme="https://mds1455975151.github.io/categories/%E7%BE%A4%E6%99%96/"/>
    
    
      <category term="群晖" scheme="https://mds1455975151.github.io/tags/%E7%BE%A4%E6%99%96/"/>
    
      <category term="NAS" scheme="https://mds1455975151.github.io/tags/NAS/"/>
    
      <category term="源码管理" scheme="https://mds1455975151.github.io/tags/%E6%BA%90%E7%A0%81%E7%AE%A1%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>群晖系列之群晖介绍</title>
    <link href="https://mds1455975151.github.io/archives/ed6edbb9.html"/>
    <id>https://mds1455975151.github.io/archives/ed6edbb9.html</id>
    <published>2018-10-27T06:29:49.000Z</published>
    <updated>2018-11-09T01:10:41.403Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>群晖系列之群晖介绍</p></blockquote><a id="more"></a><p>群晖科技（Synology ）创立于 2000 年，自始便专注于打造高效能、可靠、功能丰富且绿色环保的 NAS 服务器，是全球少数几家以单纯的提供网络存储解决方案获得世界认同的华人企业。</p><p>群晖官网:<a href="https://www.synology.com/zh-cn" target="_blank" rel="noopener">https://www.synology.com/zh-cn</a></p><p>入手型号：DS418play 双核心 4盘位NAS网络存储服务器</p><p>需求：</p><ul><li>存储资料备份</li><li>音频及视频存储</li><li>代码管理(svn\git套件)</li><li>图片备份</li><li>Docker应用</li><li>监控视频存储</li><li>网络存储同步</li><li>下载服务器</li><li>其他</li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>广告位招商QQ:1455975151</li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li><a href="http://5dwz.cn/pIRcUJ" target="_blank" rel="noopener">微鲤看看</a>,邀请码 20096825</li><li><a href="http://lc.51bko.com/238839.html?router=20&amp;source=20&amp;id=A213440368" target="_blank" rel="noopener">趣头条</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/ed6edbb9.html">https://mds1455975151.github.io/archives/ed6edbb9.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      群晖系列之群晖介绍
    
    </summary>
    
      <category term="群晖" scheme="https://mds1455975151.github.io/categories/%E7%BE%A4%E6%99%96/"/>
    
    
      <category term="群晖" scheme="https://mds1455975151.github.io/tags/%E7%BE%A4%E6%99%96/"/>
    
      <category term="NAS" scheme="https://mds1455975151.github.io/tags/NAS/"/>
    
      <category term="存储" scheme="https://mds1455975151.github.io/tags/%E5%AD%98%E5%82%A8/"/>
    
  </entry>
  
  <entry>
    <title>OpenWrt软路由系列之OpenWrt概述</title>
    <link href="https://mds1455975151.github.io/archives/858af81e.html"/>
    <id>https://mds1455975151.github.io/archives/858af81e.html</id>
    <published>2018-10-19T09:35:51.000Z</published>
    <updated>2018-11-09T01:10:39.380Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>OpenWrt软路由系列之OpenWrt概述</p></blockquote><a id="more"></a><h1 id="OpenWrt概述"><a href="#OpenWrt概述" class="headerlink" title="OpenWrt概述"></a>OpenWrt概述</h1><p>OpenWrt 可以被描述为一个嵌入式的 Linux 发行版，（主流路由器固件有 dd-wrt,tomato,openwrt三类）而不是试图建立一个单一的、静态的系统。OpenWrt的包管理提供了一个完全可写的文件系统，从应用程序供应商提供的选择和配置，并允许您自定义的设备，以适应任何应用程序。</p><p>对于开发人员，OpenWrt 是使用框架来构建应用程序，而无需建立一个完整的固件来支持；对于用户来说，这意味着其拥有完全定制的能力，可以用前所未有的方式使用该设备。</p><h1 id="OpenWrt效果展示show-time"><a href="#OpenWrt效果展示show-time" class="headerlink" title="OpenWrt效果展示show time"></a>OpenWrt效果展示show time</h1><p><img src="/archives/858af81e/01.png" alt=""><br><img src="/archives/858af81e/02.png" alt=""><br><img src="/archives/858af81e/03.png" alt=""><br><img src="/archives/858af81e/04.png" alt=""><br><img src="/archives/858af81e/05.png" alt=""></p><h1 id="选择OpenWrt的原因"><a href="#选择OpenWrt的原因" class="headerlink" title="选择OpenWrt的原因"></a>选择OpenWrt的原因</h1><ul><li>技能</li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>广告位招商QQ:1455975151</li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li><a href="http://5dwz.cn/pIRcUJ" target="_blank" rel="noopener">微鲤看看</a>,邀请码 20096825</li><li><a href="http://lc.51bko.com/238839.html?router=20&amp;source=20&amp;id=A213440368" target="_blank" rel="noopener">趣头条</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/858af81e.html">https://mds1455975151.github.io/archives/858af81e.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      OpenWrt软路由系列之OpenWrt概述
    
    </summary>
    
      <category term="OpenWrt" scheme="https://mds1455975151.github.io/categories/OpenWrt/"/>
    
    
      <category term="OpenWrt" scheme="https://mds1455975151.github.io/tags/OpenWrt/"/>
    
      <category term="软路由" scheme="https://mds1455975151.github.io/tags/%E8%BD%AF%E8%B7%AF%E7%94%B1/"/>
    
  </entry>
  
  <entry>
    <title>歌曲之天仙子</title>
    <link href="https://mds1455975151.github.io/archives/8d5c7183.html"/>
    <id>https://mds1455975151.github.io/archives/8d5c7183.html</id>
    <published>2018-10-07T12:42:41.000Z</published>
    <updated>2018-11-09T01:10:40.895Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>歌曲之天仙子</p></blockquote><a id="more"></a><p>天仙子是《剑侠情缘》中即已产生，在2000年金山公司推出的游戏《剑侠情缘2》时对其谱曲，并作为暴机结束曲。同年，这首歌被由金庸作品《侠客行》同名电视剧采用当片尾曲及插曲。</p><p><a href="https://youtu.be/siGSp_n-fhc" target="_blank" rel="noopener">https://youtu.be/siGSp_n-fhc</a></p><p>歌词</p><p>冰雪少女入凡尘<br>西子湖畔初见睛<br>是非难解虚如影<br>一腔爱<br>一身恨<br>一缕清风<br>一丝魂<br>仗剑携酒江湖行<br>多少恩怨醉梦中<br>蓦然回首万事空<br>几重幕<br>几棵松<br>几层远峦<br>几声钟</p><p>冰雪少女入凡尘<br>西子湖畔初见睛<br>是非难解虚如影<br>一腔爱<br>一身恨<br>一缕清风<br>一丝魂<br>仗剑携酒江湖行<br>多少恩怨醉梦中<br>蓦然回首万事空<br>几重幕<br>几棵松<br>几层远峦<br>几声钟<br>几层远峦<br>几声钟</p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>广告位招商QQ:1455975151</li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li><a href="http://5dwz.cn/pIRcUJ" target="_blank" rel="noopener">微鲤看看</a>,邀请码 20096825</li><li><a href="http://lc.51bko.com/238839.html?router=20&amp;source=20&amp;id=A213440368" target="_blank" rel="noopener">趣头条</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/8d5c7183.html">https://mds1455975151.github.io/archives/8d5c7183.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      歌曲之天仙子
    
    </summary>
    
      <category term="音乐" scheme="https://mds1455975151.github.io/categories/%E9%9F%B3%E4%B9%90/"/>
    
    
      <category term="歌曲" scheme="https://mds1455975151.github.io/tags/%E6%AD%8C%E6%9B%B2/"/>
    
      <category term="音乐" scheme="https://mds1455975151.github.io/tags/%E9%9F%B3%E4%B9%90/"/>
    
  </entry>
  
  <entry>
    <title>Open-Falcon监控H3C-ER3260G2路由器</title>
    <link href="https://mds1455975151.github.io/archives/186e54d8.html"/>
    <id>https://mds1455975151.github.io/archives/186e54d8.html</id>
    <published>2018-08-27T10:10:39.000Z</published>
    <updated>2018-11-09T01:10:39.327Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>本文讲述如何使用Open-Falcon监控H3C ER3260G2路由器信息，保证运维人员可以实时掌握路由器性能及流量使用问题。</p></blockquote><a id="more"></a><h1 id="部署Open-Falcon监控程序"><a href="#部署Open-Falcon监控程序" class="headerlink" title="部署Open-Falcon监控程序"></a>部署Open-Falcon监控程序</h1><p>参考资料：<a href="https://book.open-falcon.org/zh_0_2/usage/switch.html" target="_blank" rel="noopener">https://book.open-falcon.org/zh_0_2/usage/switch.html</a></p><p>利用<a href="https://github.com/gaochao1/swcollector" target="_blank" rel="noopener">swcollector</a>来实现对路由器、交换机设备的监控指标采集。</p><p>这里使用源码安装，起初使用二进制安装但是安装完成后程序无法启动，也没有日志信息，所以改为源码安装了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">配置go环境，可以使用以下脚本快速部署</span><br><span class="line">wget https://raw.githubusercontent.com/mds1455975151/tools/master/go/go_install.sh</span><br><span class="line">sh go_install.sh</span><br><span class="line"></span><br><span class="line">go get github.com/gaochao1/swcollector</span><br><span class="line">cd $GOPATH/src/github.com/gaochao1/swcollector</span><br><span class="line">go build</span><br><span class="line">go pack</span><br><span class="line">ls -al falcon-swcollector-4.0.6.3.tar.gz</span><br><span class="line">mkdir -p /usr/local/falcon-swcollector-4.0.6.3</span><br><span class="line">tar -zxf falcon-swcollector-4.0.6.3.tar.gz -C /usr/local/falcon-swcollector-4.0.6.3</span><br><span class="line">cd /usr/local/falcon-swcollector-4.0.6.3</span><br><span class="line">参考文档配置相关配置文件，cfg.json等</span><br><span class="line">./control start</span><br><span class="line">tail -f var/app.log</span><br><span class="line">到此为止监控程序部署就完毕了，因为还未设置路由器的snmp设置现在应该报连接错误，dashboard只有switch.Ping值</span><br></pre></td></tr></table></figure></p><h1 id="H3C路由器配置"><a href="#H3C路由器配置" class="headerlink" title="H3C路由器配置"></a>H3C路由器配置</h1><p><img src="/archives/186e54d8/01.png" alt=""></p><p>使用snmpwalk测试下snmp配置正确性，保证可以正常获取到相关信息</p><ul><li><p>首先在服务器安装snmp工具</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install net-snmp-utils snmp-libs snmp-devel snmp</span><br></pre></td></tr></table></figure></li><li><p>验证snmp配置正确性</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"># snmpwalk -v 2c -c public 10.1.16.1   # 路由器wan口地址</span><br><span class="line">SNMPv2-MIB::sysDescr.0 = STRING: H3C Product Version ERHMG2-MNW100-R1116</span><br><span class="line">H3C ERHMG2</span><br><span class="line">Copyright(c) 2014-2017 New H3C Technologies Co., Ltd. All rights reserved.</span><br><span class="line">SNMPv2-MIB::sysObjectID.0 = OID: SNMPv2-SMI::enterprises.25506.1.1160</span><br><span class="line">DISMAN-EVENT-MIB::sysUpTimeInstance = Timeticks: (771062000) 89 days, 5:50:20.00</span><br><span class="line">SNMPv2-MIB::sysContact.0 = STRING: R&amp;D Hangzhou, New H3C Technologies Co., Ltd.</span><br><span class="line">SNMPv2-MIB::sysName.0 = STRING: H3C</span><br><span class="line">SNMPv2-MIB::sysLocation.0 = STRING: Hangzhou, China</span><br><span class="line">SNMPv2-MIB::sysServices.0 = INTEGER: 78</span><br><span class="line">SNMPv2-MIB::sysORLastChange.0 = Timeticks: (22) 0:00:00.22</span><br><span class="line">SNMPv2-MIB::sysORID.1 = OID: SNMPv2-MIB::snmpMIB</span><br><span class="line">SNMPv2-MIB::sysORID.2 = OID: TCP-MIB::tcpMIB</span><br><span class="line">SNMPv2-MIB::sysORID.3 = OID: IP-MIB::ip</span><br><span class="line">SNMPv2-MIB::sysORID.4 = OID: UDP-MIB::udpMIB</span><br><span class="line">SNMPv2-MIB::sysORID.5 = OID: SNMP-VIEW-BASED-ACM-MIB::vacmBasicGroup</span><br><span class="line">SNMPv2-MIB::sysORID.6 = OID: SNMP-FRAMEWORK-MIB::snmpFrameworkMIBCompliance</span><br><span class="line">SNMPv2-MIB::sysORID.7 = OID: SNMP-MPD-MIB::snmpMPDCompliance</span><br><span class="line">SNMPv2-MIB::sysORID.8 = OID: SNMP-USER-BASED-SM-MIB::usmMIBCompliance</span><br><span class="line">SNMPv2-MIB::sysORDescr.1 = STRING: The MIB module for SNMPv2 entities</span><br><span class="line">SNMPv2-MIB::sysORDescr.2 = STRING: The MIB module for managing TCP implementations</span><br><span class="line">SNMPv2-MIB::sysORDescr.3 = STRING: The MIB module for managing IP and ICMP implementations</span><br><span class="line">SNMPv2-MIB::sysORDescr.4 = STRING: The MIB module for managing UDP implementations</span><br><span class="line">SNMPv2-MIB::sysORDescr.5 = STRING: View-based Access Control Model for SNMP.</span><br><span class="line">SNMPv2-MIB::sysORDescr.6 = STRING: The SNMP Management Architecture MIB.</span><br><span class="line">SNMPv2-MIB::sysORDescr.7 = STRING: The MIB for Message Processing and Dispatching.</span><br><span class="line">SNMPv2-MIB::sysORDescr.8 = STRING: The management information definitions for the SNMP User-based Security Model.</span><br><span class="line">SNMPv2-MIB::sysORUpTime.1 = Timeticks: (21) 0:00:00.21</span><br><span class="line">SNMPv2-MIB::sysORUpTime.2 = Timeticks: (21) 0:00:00.21</span><br><span class="line">SNMPv2-MIB::sysORUpTime.3 = Timeticks: (21) 0:00:00.21</span><br><span class="line">SNMPv2-MIB::sysORUpTime.4 = Timeticks: (21) 0:00:00.21</span><br><span class="line">SNMPv2-MIB::sysORUpTime.5 = Timeticks: (21) 0:00:00.21</span><br><span class="line">SNMPv2-MIB::sysORUpTime.6 = Timeticks: (22) 0:00:00.22</span><br><span class="line">SNMPv2-MIB::sysORUpTime.7 = Timeticks: (22) 0:00:00.22</span><br><span class="line">SNMPv2-MIB::sysORUpTime.8 = Timeticks: (22) 0:00:00.22</span><br><span class="line">IF-MIB::ifNumber.0 = INTEGER: 7</span><br><span class="line">................................省略</span><br></pre></td></tr></table></figure></li></ul><h1 id="检查并验证监控信息"><a href="#检查并验证监控信息" class="headerlink" title="检查并验证监控信息"></a>检查并验证监控信息</h1><p>打开dashboard查看路由器的相关信息<br><img src="/archives/186e54d8/02.png" alt=""><br><img src="/archives/186e54d8/03.png" alt=""></p><p>另外如果开启http 可以查看web界面 <a href="http://10.1.16.151:1989/" target="_blank" rel="noopener">http://10.1.16.151:1989/</a><br><img src="/archives/186e54d8/04.png" alt=""></p><h1 id="配置监控模板及设置报警规则"><a href="#配置监控模板及设置报警规则" class="headerlink" title="配置监控模板及设置报警规则"></a>配置监控模板及设置报警规则</h1><p>省略</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://www.cnblogs.com/lei0213/p/8868080.html" target="_blank" rel="noopener">centos7之zabbix的监控H3C ER3200G2流量</a></li></ul><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>广告位招商QQ:1455975151</li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li><a href="http://5dwz.cn/pIRcUJ" target="_blank" rel="noopener">微鲤看看</a>,邀请码 20096825</li><li><a href="http://lc.51bko.com/238839.html?router=20&amp;source=20&amp;id=A213440368" target="_blank" rel="noopener">趣头条</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/186e54d8.html">https://mds1455975151.github.io/archives/186e54d8.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      Open-Falcon监控H3C ER3260G2路由器
    
    </summary>
    
      <category term="Linux运维" scheme="https://mds1455975151.github.io/categories/Linux%E8%BF%90%E7%BB%B4/"/>
    
    
      <category term="Open-Falcon" scheme="https://mds1455975151.github.io/tags/Open-Falcon/"/>
    
      <category term="H3C ER3260G2" scheme="https://mds1455975151.github.io/tags/H3C-ER3260G2/"/>
    
  </entry>
  
  <entry>
    <title>基于Consul+upsync构建动态Nginx配置系统</title>
    <link href="https://mds1455975151.github.io/archives/c92739f9.html"/>
    <id>https://mds1455975151.github.io/archives/c92739f9.html</id>
    <published>2018-08-06T03:29:49.000Z</published>
    <updated>2018-11-09T01:10:40.481Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>基于Consul+upsync构建动态Nginx配置系统</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本文介绍如何利用Consul+upsync来实现动态的管理Nginx后端服务器，实现动态增删后端服务器而无需reload Nginx服务。</p><h1 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h1><table><thead><tr><th>IP</th><th>os</th><th>role</th><th>remark</th></tr></thead><tbody><tr><td>192.168.200.101</td><td>CentOS 7.4</td><td>nginx-lb and consul</td><td></td></tr><tr><td>192.168.200.102</td><td>CentOS 7.4</td><td>nginx-server</td><td></td></tr><tr><td>192.168.200.103</td><td>CentOS 7.4</td><td>nginx-server</td></tr></tbody></table><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># cat /etc/redhat-release</span><br><span class="line">CentOS Linux release 7.2.1511 (Core)</span><br><span class="line"># uname -r</span><br><span class="line">3.10.0-327.el7.x86_64</span><br><span class="line"># uname -m</span><br><span class="line">x86_64</span><br><span class="line"># nginx -V</span><br><span class="line">nginx version: nginx/1.14.0</span><br><span class="line">built by gcc 4.8.5 20150623 (Red Hat 4.8.5-28) (GCC)</span><br><span class="line">built with OpenSSL 1.0.2k-fips  26 Jan 2017</span><br><span class="line">TLS SNI support enabled</span><br><span class="line">configure arguments: --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib64/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=nginx --group=nginx --with-compat --with-file-aio --with-threads --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_flv_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_mp4_module --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-mail --with-mail_ssl_module --with-stream --with-stream_realip_module --with-stream_ssl_module --with-stream_ssl_preread_module --with-cc-opt=&apos;-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic -fPIC&apos; --with-ld-opt=&apos;-Wl,-z,relro -Wl,-z,now -pie&apos; --add-module=/data0/src/nginx_upstream_check_module --add-module=/data0/src/nginx-upsync-module</span><br><span class="line"># consul version</span><br><span class="line">Consul v1.2.2</span><br><span class="line">Protocol 2 spoken by default, understands 2 to 3 (agent will automatically use protocol &gt;2 when speaking to compatible agents)</span><br></pre></td></tr></table></figure><h1 id="Nginx-Server安装"><a href="#Nginx-Server安装" class="headerlink" title="Nginx-Server安装"></a>Nginx-Server安装</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># yum install -y pcre-devel openssl-devel</span><br><span class="line"># cat /etc/yum.repos.d/nginx.repo</span><br><span class="line">[nginx]</span><br><span class="line">name=nginx repo</span><br><span class="line">baseurl=http://nginx.org/packages/centos/7/$basearch/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line"># yum install -y nginx</span><br><span class="line"># systemctl start nginx</span><br><span class="line"># systemctl enable nginx</span><br><span class="line"># echo &quot;linux-node03.example.com:192.168.47.102&quot; &gt;/usr/share/nginx/html/index.html</span><br><span class="line"># echo &quot;linux-node04.example.com:192.168.47.103&quot; &gt;/usr/share/nginx/html/index.html</span><br></pre></td></tr></table></figure><h1 id="Nginx-LB配置"><a href="#Nginx-LB配置" class="headerlink" title="Nginx-LB配置"></a>Nginx-LB配置</h1><h2 id="Nginx部署"><a href="#Nginx部署" class="headerlink" title="Nginx部署"></a>Nginx部署</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># yum install -y pcre-devel openssl-devel</span><br><span class="line"># cat /etc/yum.repos.d/nginx.repo</span><br><span class="line">[nginx]</span><br><span class="line">name=nginx repo</span><br><span class="line">baseurl=http://nginx.org/packages/centos/7/$basearch/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line"># yum install -y nginx</span><br><span class="line"># systemctl start nginx</span><br><span class="line"># systemctl enable nginx</span><br></pre></td></tr></table></figure><h2 id="nginx-upsync-module及nginx-upstream-check-module模块配置"><a href="#nginx-upsync-module及nginx-upstream-check-module模块配置" class="headerlink" title="nginx-upsync-module及nginx_upstream_check_module模块配置"></a>nginx-upsync-module及nginx_upstream_check_module模块配置</h2><p>upsync是微博开源的基于nginx的动态流量管理方案. github地址: <a href="https://github.com/weibocom/nginx-upsync-module" target="_blank" rel="noopener">https://github.com/weibocom/nginx-upsync-module</a>.</p><p>nginx-upsync-module，它的功能是拉取consul的后端server的列表，并更新Nginx的路由信息。此模块不依赖于任何第三方模块。 consul作为Nginx的db，利用consul的KV服务，每个Nginx work进程独立的去拉取各个upstream 的配置，并更新各自的路由。<br><img src="/archives/c92739f9/list_update.bmp" alt=""></p><p>模块相关信息可以参考GitHub文档信息：<a href="https://github.com/weibocom/nginx-upsync-module/tree/master/doc" target="_blank" rel="noopener">https://github.com/weibocom/nginx-upsync-module/tree/master/doc</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">cd /data0/src</span><br><span class="line">git clone https://github.com/weibocom/nginx-upsync-module.git</span><br><span class="line">git clone https://github.com/xiaokai-wang/nginx_upstream_check_module.git</span><br><span class="line">wget http://nginx.org/download/nginx-1.14.0.tar.gz</span><br><span class="line">tar -zxf nginx-1.14.0.tar.gz</span><br><span class="line">cd nginx-1.14.0</span><br><span class="line">patch -p1 &lt; /data0/src/nginx_upstream_check_module/check_1.12.1+.patch</span><br><span class="line">./configure --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib64/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=nginx --group=nginx --with-compat --with-file-aio --with-threads --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_flv_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_mp4_module --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-mail --with-mail_ssl_module --with-stream --with-stream_realip_module --with-stream_ssl_module --with-stream_ssl_preread_module --with-cc-opt=&apos;-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic -fPIC&apos; --with-ld-opt=&apos;-Wl,-z,relro -Wl,-z,now -pie&apos; --add-module=/data0/src/nginx_upstream_check_module --add-module=/data0/src/nginx-upsync-module</span><br><span class="line">make</span><br><span class="line">which nginx</span><br><span class="line">cp /usr/sbin/nginx&#123;,.20180804&#125;</span><br><span class="line">systemctl stop nginx</span><br><span class="line">cp /data0/src/nginx-1.14.0/objs/nginx /usr/sbin/</span><br><span class="line">systemctl start ngin</span><br><span class="line">nginx -V</span><br></pre></td></tr></table></figure><h1 id="Consul配置"><a href="#Consul配置" class="headerlink" title="Consul配置"></a>Consul配置</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd /data0/src/</span><br><span class="line">wget https://releases.hashicorp.com/consul/1.2.2/consul_1.2.2_linux_amd64.zip</span><br><span class="line">unzip /data0/src/consul_1.2.2_linux_amd64.zip</span><br><span class="line">install /data0/src/consul /usr/local/bin/</span><br><span class="line">mkdir -p /data0/consul/&#123;data,logs&#125;</span><br><span class="line">consul agent --server --bind=192.168.200.101 --data-dir=/data0/consule/data -bootstrap-expect=1 -node=nginx-lb -client 0.0.0.0 -ui</span><br></pre></td></tr></table></figure><h1 id="调整Nginx配置并测试"><a href="#调整Nginx配置并测试" class="headerlink" title="调整Nginx配置并测试"></a>调整Nginx配置并测试</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"># cat /etc/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line">user  nginx;</span><br><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">error_log  /var/log/nginx/error.log warn;</span><br><span class="line">pid        /var/run/nginx.pid;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       /etc/nginx/mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</span><br><span class="line">                      &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</span><br><span class="line">                      &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    #tcp_nopush     on;</span><br><span class="line"></span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">    #gzip  on;</span><br><span class="line"></span><br><span class="line">    include /etc/nginx/conf.d/*.conf;</span><br><span class="line"></span><br><span class="line">    upstream test &#123;</span><br><span class="line">        server 127.0.0.1:11111;</span><br><span class="line">        upsync 192.168.200.101:8500/v1/kv/upstreams/test upsync_timeout=6m upsync_interval=500ms upsync_type=consul strong_dependency=off;</span><br><span class="line">        upsync_dump_path /etc/nginx/server/server.conf;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    upstream bar &#123;</span><br><span class="line">        server 192.168.200.102:80 weight=1 fail_timeout=10 max_fails=3;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line"></span><br><span class="line">        location = / &#123;</span><br><span class="line">        proxy_pass http://test;</span><br><span class="line">          proxy_set_header  Host  $host;</span><br><span class="line">          proxy_set_header  X-Real-IP  $remote_addr;</span><br><span class="line">          proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;</span><br><span class="line">          add_header    real $upstream_addr;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location ~ /Content|Scripts/ &#123;</span><br><span class="line">          proxy_pass http://test;</span><br><span class="line">          proxy_set_header  Host  $host;</span><br><span class="line">          proxy_set_header  X-Real-IP  $remote_addr;</span><br><span class="line">          proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location = /bar &#123;</span><br><span class="line">            proxy_pass http://bar;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location = /upstream_show &#123;</span><br><span class="line">            upstream_show;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location = /upstream_status &#123;</span><br><span class="line">            stub_status on;</span><br><span class="line">            access_log off;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>创建upsync_dump_path<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /etc/nginx/server/</span><br></pre></td></tr></table></figure></p><h2 id="添加后端"><a href="#添加后端" class="headerlink" title="添加后端"></a>添加后端</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -X PUT http://192.168.200.101:8500/v1/kv/upstreams/test/192.168.200.102:80</span><br><span class="line">curl -X PUT http://192.168.200.101:8500/v1/kv/upstreams/test/192.168.200.103:80</span><br></pre></td></tr></table></figure><h2 id="查看通过consul添加的后端服务器信息"><a href="#查看通过consul添加的后端服务器信息" class="headerlink" title="查看通过consul添加的后端服务器信息"></a>查看通过consul添加的后端服务器信息</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># cat /etc/nginx/server/server.conf</span><br><span class="line">server 192.168.200.103:80 weight=1 max_fails=2 fail_timeout=10s;</span><br><span class="line">server 192.168.200.102:80 weight=1 max_fails=2 fail_timeout=10s;</span><br></pre></td></tr></table></figure><p><img src="/archives/c92739f9/03.png" alt=""></p><h2 id="验证nginx代理信息"><a href="#验证nginx代理信息" class="headerlink" title="验证nginx代理信息"></a>验证nginx代理信息</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># for i in `seq 100` ;do curl -s -I http://192.168.200.101|tail -2|head -1;done</span><br><span class="line">real: 192.168.200.102:80</span><br><span class="line">real: 192.168.200.103:80</span><br><span class="line">real: 192.168.200.102:80</span><br><span class="line">real: 192.168.200.103:80</span><br><span class="line">real: 192.168.200.102:80</span><br><span class="line">real: 192.168.200.103:80</span><br><span class="line">real: 192.168.200.102:80</span><br><span class="line">real: 192.168.200.103:80</span><br><span class="line">real: 192.168.200.102:80</span><br><span class="line">real: 192.168.200.103:80</span><br><span class="line">real: 192.168.200.102:80</span><br><span class="line">real: 192.168.200.103:80</span><br></pre></td></tr></table></figure><blockquote><p>real地址就是后端服务器的地址</p></blockquote><h2 id="删除后端"><a href="#删除后端" class="headerlink" title="删除后端"></a>删除后端</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -X DELETE http://192.168.200.101:8500/v1/kv/upstreams/test/192.168.200.102:80</span><br><span class="line">curl -X DELETE http://192.168.200.101:8500/v1/kv/upstreams/test/192.168.200.103:80</span><br></pre></td></tr></table></figure><h1 id="测试并验证"><a href="#测试并验证" class="headerlink" title="测试并验证"></a>测试并验证</h1><p><img src="/archives/c92739f9/01.png" alt=""><br><img src="/archives/c92739f9/02.png" alt=""></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>广告位招商QQ:1455975151</li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li><a href="http://5dwz.cn/pIRcUJ" target="_blank" rel="noopener">微鲤看看</a>,邀请码 20096825</li><li><a href="http://lc.51bko.com/238839.html?router=20&amp;source=20&amp;id=A213440368" target="_blank" rel="noopener">趣头条</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/c92739f9.html">https://mds1455975151.github.io/archives/c92739f9.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      基于consul+upsync构建动态Nginx配置系统
    
    </summary>
    
      <category term="DevOps" scheme="https://mds1455975151.github.io/categories/DevOps/"/>
    
    
      <category term="nginx" scheme="https://mds1455975151.github.io/tags/nginx/"/>
    
      <category term="upsync" scheme="https://mds1455975151.github.io/tags/upsync/"/>
    
      <category term="consul" scheme="https://mds1455975151.github.io/tags/consul/"/>
    
  </entry>
  
  <entry>
    <title>Jenkins之配置多jobs执行</title>
    <link href="https://mds1455975151.github.io/archives/de5dd2ef.html"/>
    <id>https://mds1455975151.github.io/archives/de5dd2ef.html</id>
    <published>2018-07-07T04:03:15.000Z</published>
    <updated>2018-11-09T01:10:38.916Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>Jenkins之配置多jobs执行</p></blockquote><a id="more"></a><h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>使用jenkins中，当有多个jobs需要互相关联时，就需要设置jobs的上下游关联关系。比如job_A运行后触发job_B。</p><h1 id="多jobs无关联参数"><a href="#多jobs无关联参数" class="headerlink" title="多jobs无关联参数"></a>多jobs无关联参数</h1><p>主要是上游配置及下游配置</p><h1 id="多jobs有关联参数"><a href="#多jobs有关联参数" class="headerlink" title="多jobs有关联参数"></a>多jobs有关联参数</h1><p>插件：Parameterized Trigger Plugin</p><p>场景：游戏打包及更新<br>打包项目：选择分支进行打包<br>更新项目：选择分支，选择包进行更新<br>即可以通过job关联起来，将打包的包名及分支名称传递给更新项目，简化及加快更新速度。</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>广告位招商QQ:1455975151</li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li><a href="http://5dwz.cn/pIRcUJ" target="_blank" rel="noopener">微鲤看看</a>,邀请码 20096825</li><li><a href="http://lc.51bko.com/238839.html?router=20&amp;source=20&amp;id=A213440368" target="_blank" rel="noopener">趣头条</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/de5dd2ef.html">https://mds1455975151.github.io/archives/de5dd2ef.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      Jenkins之配置多jobs执行
    
    </summary>
    
      <category term="jenkins" scheme="https://mds1455975151.github.io/categories/jenkins/"/>
    
    
      <category term="jenkins" scheme="https://mds1455975151.github.io/tags/jenkins/"/>
    
      <category term="多jobs" scheme="https://mds1455975151.github.io/tags/%E5%A4%9Ajobs/"/>
    
      <category term="并行" scheme="https://mds1455975151.github.io/tags/%E5%B9%B6%E8%A1%8C/"/>
    
      <category term="串行" scheme="https://mds1455975151.github.io/tags/%E4%B8%B2%E8%A1%8C/"/>
    
  </entry>
  
  <entry>
    <title>Git之镜像仓库全攻略</title>
    <link href="https://mds1455975151.github.io/archives/177a4e8b.html"/>
    <id>https://mds1455975151.github.io/archives/177a4e8b.html</id>
    <published>2018-07-07T04:01:41.000Z</published>
    <updated>2018-11-09T01:10:38.039Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>Git镜像仓库应用全攻略指南</p></blockquote><a id="more"></a><h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>以下案例以GitHub上的仓库作为原仓库，在国内或者公司局域网部署镜像仓库。使用<a href="https://github.com/mds1455975151/ansible-role-pip.git仓库作为原仓库。" target="_blank" rel="noopener">https://github.com/mds1455975151/ansible-role-pip.git仓库作为原仓库。</a></p><h2 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h2><ul><li>加速访问GitHub仓库</li><li>GitHub负载均衡(类似MySQL的读写分离架构)</li></ul><h1 id="原生git-clone-–mirror实现"><a href="#原生git-clone-–mirror实现" class="headerlink" title="原生git clone –mirror实现"></a>原生git clone –mirror实现</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># cd /opt/</span><br><span class="line"># git clone --mirror https://github.com/mds1455975151/ansible-role-pip.git</span><br><span class="line"># ls -al</span><br><span class="line">total 16</span><br><span class="line">drwxr-xr-x.  4 root root 4096 Jul  7 13:31 .</span><br><span class="line">dr-xr-xr-x. 20 root root 4096 Jul  7 13:33 ..</span><br><span class="line">drwxr-xr-x   7 root root 4096 Jul  7 13:31 ansible-role-pip.git</span><br><span class="line">drwxr-xr-x.  2 root root 4096 Mar 26  2015 rh</span><br><span class="line"># git clone 10.135.95.147:/opt/ansible-role-pip.git .</span><br><span class="line">Cloning into &apos;.&apos;...</span><br><span class="line">remote: Counting objects: 181, done.</span><br><span class="line">remote: Compressing objects: 100% (77/77), done.</span><br><span class="line">remote: Total 181 (delta 75), reused 181 (delta 75)</span><br><span class="line">Receiving objects: 100% (181/181), 18.78 KiB | 0 bytes/s, done.</span><br><span class="line">Resolving deltas: 100% (75/75), done.</span><br><span class="line">[root@VM_95_147_centos tmp]# ll</span><br><span class="line">total 36</span><br><span class="line">drwxr-xr-x 2 root root 4096 Jul  7 13:35 defaults</span><br><span class="line">drwxr-xr-x 2 root root 4096 Jul  7 13:35 handlers</span><br><span class="line">drwxr-xr-x 2 root root 4096 Jul  7 13:35 meta</span><br><span class="line">-rw-r--r-- 1 root root 1233 Jul  7 13:35 README.md</span><br><span class="line">-rw-r--r-- 1 root root   28 Jul  7 13:35 requirements.yml</span><br><span class="line">drwxr-xr-x 2 root root 4096 Jul  7 13:35 tasks</span><br><span class="line">drwxr-xr-x 2 root root 4096 Jul  7 13:35 templates</span><br><span class="line">drwxr-xr-x 2 root root 4096 Jul  7 13:35 tests</span><br><span class="line">drwxr-xr-x 2 root root 4096 Jul  7 13:35 vars</span><br></pre></td></tr></table></figure><h1 id="利用gogs实现"><a href="#利用gogs实现" class="headerlink" title="利用gogs实现"></a>利用gogs实现</h1><p>查看迁移和镜像仓库设置<br>1、添加迁移外部仓库<br><img src="/archives/177a4e8b/01.png" alt=""><br>2、配置克隆地址、授权信息、迁移类型等信息<br><img src="/archives/177a4e8b/02.png" alt=""><br>3、设置仓库同步频率<br><img src="/archives/177a4e8b/03.png" alt=""><br>4、配置并立即同步<br><img src="/archives/177a4e8b/04.png" alt=""></p><h1 id="利用github-mirrors实现"><a href="#利用github-mirrors实现" class="headerlink" title="利用github-mirrors实现"></a>利用github-mirrors实现</h1><p><a href="https://docs.gitlab.com/ee/workflow/repository_mirroring.html" target="_blank" rel="noopener">https://docs.gitlab.com/ee/workflow/repository_mirroring.html</a></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>广告位招商QQ:1455975151</li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li><a href="http://5dwz.cn/pIRcUJ" target="_blank" rel="noopener">微鲤看看</a>,邀请码 20096825</li><li><a href="http://lc.51bko.com/238839.html?router=20&amp;source=20&amp;id=A213440368" target="_blank" rel="noopener">趣头条</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/177a4e8b.html">https://mds1455975151.github.io/archives/177a4e8b.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      Git镜像仓库应用全攻略指南
    
    </summary>
    
      <category term="Git" scheme="https://mds1455975151.github.io/categories/Git/"/>
    
    
      <category term="mirror" scheme="https://mds1455975151.github.io/tags/mirror/"/>
    
      <category term="镜像仓库" scheme="https://mds1455975151.github.io/tags/%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93/"/>
    
      <category term="webhook" scheme="https://mds1455975151.github.io/tags/webhook/"/>
    
      <category term="gitlab-mirrors" scheme="https://mds1455975151.github.io/tags/gitlab-mirrors/"/>
    
      <category term="gogs" scheme="https://mds1455975151.github.io/tags/gogs/"/>
    
  </entry>
  
  <entry>
    <title>CentOS安装显示器黑屏解决</title>
    <link href="https://mds1455975151.github.io/archives/a542927a.html"/>
    <id>https://mds1455975151.github.io/archives/a542927a.html</id>
    <published>2018-04-27T07:29:17.000Z</published>
    <updated>2018-11-09T01:10:37.507Z</updated>
    
    <content type="html"><![CDATA[<script src="\assets\js\APlayer.min.js"> </script><blockquote><p>CentOS安装显示器黑屏解决</p></blockquote><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>办公室有一台闲置台式机，重做系统安装CentOS做测试机器，安装过程显示器黑屏。</p><h1 id="实践操作"><a href="#实践操作" class="headerlink" title="实践操作"></a>实践操作</h1><h2 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h2><p>显示器型号：Dell E2214Hv<br>报错信息如下：<br><img src="/archives/a542927a/01.jpg" alt=""></p><h2 id="问题分析及解决办法"><a href="#问题分析及解决办法" class="headerlink" title="问题分析及解决办法"></a>问题分析及解决办法</h2><p><a href="https://www.centos.org/forums/viewtopic.php?t=23977" target="_blank" rel="noopener">https://www.centos.org/forums/viewtopic.php?t=23977</a><br>在安装界面使用tab键进行选择，添加如下参数，调整输出信号分辨率<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">linux resolution=1440X900</span><br></pre></td></tr></table></figure></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://www.centos.org/forums/viewtopic.php?t=23977" target="_blank" rel="noopener">https://www.centos.org/forums/viewtopic.php?t=23977</a></p><p>======================================================<br>希望各位朋友支持一下</p><ul><li>领取我的<a href="https://promotion.aliyun.com/ntms/act/ambassador/sharetouser.html?userCode=xpdsz87p&amp;utm_source=xpdsz87p" target="_blank" rel="noopener">阿里云幸运券</a>,谢谢.</li><li>使用<a href="https://cloud.tencent.com/redirect.php?redirect=1005&amp;cps_key=5a162632de40024cd01aabff4d3f1370" target="_blank" rel="noopener">腾讯云资源</a></li><li>广告位招商QQ:1455975151</li><li><a href="https://www.linode.com/?r=82f5a02930ac529c4176aff09c1513cf9e7b4418" target="_blank" rel="noopener">Linode VPS</a></li><li><a href="https://bandwagonhost.com/aff.php?aff=38634" target="_blank" rel="noopener">搬瓦工VPS</a></li><li><a href="http://5dwz.cn/pIRcUJ" target="_blank" rel="noopener">微鲤看看</a>,邀请码 20096825</li><li><a href="http://lc.51bko.com/238839.html?router=20&amp;source=20&amp;id=A213440368" target="_blank" rel="noopener">趣头条</a></li><li>阿里云1888元云产品通用代金券<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xpdsz87p" target="_blank" rel="noopener">点我</a></li><li>阿里云最新活动<a href="https://promotion.aliyun.com/ntms/act/vmpt/aliyun-group/home.html?userCode=xpdsz87p" target="_blank" rel="noopener">全民云计算升级-拼团上云更优惠</a></li><li>喜欢购物的朋友可以看看，<a href="http://www.1zhe.com/yq/1066027" target="_blank" rel="noopener">一折特卖</a><!--注册一折特卖，免费领集分宝，集分宝可以当钱花，免费购物不是梦，注册马上送你10集分宝。--></li></ul><p><strong>本文作者</strong>：dongsheng<br><strong>本文地址</strong>： <a href="https://mds1455975151.github.io/archives/a542927a.html">https://mds1455975151.github.io/archives/a542927a.html</a> <br><strong>版权声明</strong>：转载请注明出处！</p>]]></content>
    
    <summary type="html">
    
      CentOS安装显示器黑屏解决
    
    </summary>
    
      <category term="Linux运维" scheme="https://mds1455975151.github.io/categories/Linux%E8%BF%90%E7%BB%B4/"/>
    
    
      <category term="CentOS" scheme="https://mds1455975151.github.io/tags/CentOS/"/>
    
      <category term="黑屏" scheme="https://mds1455975151.github.io/tags/%E9%BB%91%E5%B1%8F/"/>
    
  </entry>
  
</feed>
